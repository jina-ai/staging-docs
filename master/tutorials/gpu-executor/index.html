<!DOCTYPE html>
<html class="no-js" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="light dark" name="color-scheme"/>
  <meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
  <meta content="Run Executors on GPU" property="og:title"/>
  <meta content="website" property="og:type">
   <meta content="https://docs.jina.ai/tutorials/gpu-executor.html" property="og:url"/>
   <meta content="Jina 2.5.1 Documentation" property="og:site_name"/>
   <meta content="Tadej @ Jina AI Sept. 1, 2021 This tutorial will show you how to use an Executor on a GPU, both locally and in a Docker container. You will also learn how to use GPU with pre-built Hub executors. Using a GPU allows you to significantly speed up encoding for most deep learning models, reducing res..." property="og:description"/>
   <meta content="https://docs.jina.ai/_images/tadej.jpg" property="og:image"/>
   <meta content="" property="og:image:alt"/>
   <meta content="summary_large_image" name="twitter:card"/>
   <meta content="@JinaAI_" name="twitter:site"/>
   <meta content="@JinaAI_" name="twitter:creator"/>
   <meta content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning" name="description"/>
   <meta content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning" property="og:description"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-48ZDWC8GT6">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-48ZDWC8GT6');
   </script>
   <script async="" defer="" src="https://buttons.github.io/buttons.js">
   </script>
   <link href="../../genindex/" rel="index" title="Index"/>
   <link href="../../search/" rel="search" title="Search"/>
   <link href="../../fundamentals/flow/" rel="next" title="Flow"/>
   <link href="../../fundamentals/executor/repository-structure/" rel="prev" title="Executor File Structure"/>
   <link href="../../_static/favicon.ico" rel="shortcut icon"/>
   <meta content="sphinx-4.3.1, furo 2021.10.09" name="generator"/>
   <title>
    Run Executors on GPU - Jina 2.5.1 documentation
   </title>
   <link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
   <link href="../../_static/styles/furo.css?digest=0254c309f5cadf746f1a613e7677379ac9c8cdcd" rel="stylesheet" type="text/css"/>
   <link href="../../_static/copybutton.css" rel="stylesheet" type="text/css"/>
   <link href="../../_static/tabs.css" rel="stylesheet" type="text/css"/>
   <link href="../../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" rel="stylesheet" type="text/css"/>
   <link href="../../_static/styles/furo-extensions.css?digest=16fb25fabf47304eee183a5e9af80b1ba98259b1" rel="stylesheet" type="text/css"/>
   <link href="../../_static/main.css" rel="stylesheet" type="text/css"/>
   <link href="../../_static/docbot.css" rel="stylesheet" type="text/css"/>
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" rel="stylesheet" type="text/css"/>
   <style>
    body {
    --color-code-background: #ffffff;
  --color-code-foreground: #4d4d4d;
  --color-brand-primary: #009191;
  --color-brand-content: #009191;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
    }
  }
   </style>
  </meta>
 </head>
 <body>
  <script>
   document.body.dataset.theme = localStorage.getItem("theme") || "auto";
  </script>
  <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
   <symbol id="svg-toc" viewbox="0 0 24 24">
    <title>
     Contents
    </title>
    <svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <path d="M0 0h24v24H0z" stroke="none">
     </path>
     <line x1="4" x2="20" y1="6" y2="6">
     </line>
     <line x1="10" x2="20" y1="12" y2="12">
     </line>
     <line x1="6" x2="20" y1="18" y2="18">
     </line>
    </svg>
   </symbol>
   <symbol id="svg-menu" viewbox="0 0 24 24">
    <title>
     Menu
    </title>
    <svg class="feather-menu" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <line x1="3" x2="21" y1="12" y2="12">
     </line>
     <line x1="3" x2="21" y1="6" y2="6">
     </line>
     <line x1="3" x2="21" y1="18" y2="18">
     </line>
    </svg>
   </symbol>
   <symbol id="svg-arrow-right" viewbox="0 0 24 24">
    <title>
     Expand
    </title>
    <svg class="feather-chevron-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <polyline points="9 18 15 12 9 6">
     </polyline>
    </svg>
   </symbol>
   <symbol id="svg-sun" viewbox="0 0 24 24">
    <title>
     Light mode
    </title>
    <svg class="feather-sun" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <circle cx="12" cy="12" r="5">
     </circle>
     <line x1="12" x2="12" y1="1" y2="3">
     </line>
     <line x1="12" x2="12" y1="21" y2="23">
     </line>
     <line x1="4.22" x2="5.64" y1="4.22" y2="5.64">
     </line>
     <line x1="18.36" x2="19.78" y1="18.36" y2="19.78">
     </line>
     <line x1="1" x2="3" y1="12" y2="12">
     </line>
     <line x1="21" x2="23" y1="12" y2="12">
     </line>
     <line x1="4.22" x2="5.64" y1="19.78" y2="18.36">
     </line>
     <line x1="18.36" x2="19.78" y1="5.64" y2="4.22">
     </line>
    </svg>
   </symbol>
   <symbol id="svg-moon" viewbox="0 0 24 24">
    <title>
     Dark mode
    </title>
    <svg class="icon-tabler-moon" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <path d="M0 0h24v24H0z" fill="none" stroke="none">
     </path>
     <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z">
     </path>
    </svg>
   </symbol>
   <symbol id="svg-sun-half" viewbox="0 0 24 24">
    <title>
     Auto light/dark mode
    </title>
    <svg class="icon-tabler-shadow" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <path d="M0 0h24v24H0z" fill="none" stroke="none">
     </path>
     <circle cx="12" cy="12" r="9">
     </circle>
     <path d="M13 12h5">
     </path>
     <path d="M13 15h4">
     </path>
     <path d="M13 18h1">
     </path>
     <path d="M13 9h4">
     </path>
     <path d="M13 6h1">
     </path>
    </svg>
   </symbol>
  </svg>
  <input class="sidebar-toggle" id="__navigation" name="__navigation" type="checkbox"/>
  <input class="sidebar-toggle" id="__toc" name="__toc" type="checkbox"/>
  <label class="overlay sidebar-overlay" for="__navigation">
   <div class="visually-hidden">
    Hide navigation sidebar
   </div>
  </label>
  <label class="overlay toc-overlay" for="__toc">
   <div class="visually-hidden">
    Hide table of contents sidebar
   </div>
  </label>
  <div class="page">
   <header class="mobile-header" id="mobile-header">
    <div class="header-left">
     <label class="nav-overlay-icon" for="__navigation">
      <div class="visually-hidden">
       Toggle site navigation sidebar
      </div>
      <i class="icon">
       <svg>
        <use href="#svg-menu">
        </use>
       </svg>
      </i>
     </label>
    </div>
    <div class="header-center">
     <a href="../../">
      <div class="brand">
       Jina 2.5.1 documentation
      </div>
     </a>
    </div>
    <div class="header-right">
     <div class="theme-toggle-container theme-toggle-header">
      <button class="theme-toggle">
       <div class="visually-hidden">
        Toggle Light / Dark / Auto color theme
       </div>
       <svg class="theme-icon-when-auto">
        <use href="#svg-sun-half">
        </use>
       </svg>
       <svg class="theme-icon-when-dark">
        <use href="#svg-moon">
        </use>
       </svg>
       <svg class="theme-icon-when-light">
        <use href="#svg-sun">
        </use>
       </svg>
      </button>
     </div>
     <label class="toc-overlay-icon toc-header-icon" for="__toc">
      <div class="visually-hidden">
       Toggle table of contents sidebar
      </div>
      <i class="icon">
       <svg>
        <use href="#svg-toc">
        </use>
       </svg>
      </i>
     </label>
    </div>
   </header>
   <aside class="sidebar-drawer" id="sidebar-drawer">
    <div class="sidebar-container">
     <div class="sidebar-sticky">
      <a class="sidebar-brand" href="../../">
       <div class="sidebar-logo-container">
        <img alt="Light Logo" class="sidebar-logo only-light" src="../../_static/logo-light.svg"/>
        <img alt="Dark Logo" class="sidebar-logo only-dark" src="../../_static/logo-dark.svg"/>
       </div>
      </a>
      <div class="sd-d-flex-row sd-align-major-spaced">
       <a aria-label="Star jina-ai/jina on GitHub" class="github-button" data-icon="octicon-star" data-show-count="true" href="https://github.com/jina-ai/jina" style="opacity: 0;">
        Star
       </a>
       <select class="version-select" onchange="window.location.href=this.value">
        <option selected="selected" value="master/tutorials/gpu-executor/">
         master
        </option>        <option value="../../../tutorials/gpu-executor/">
         latest(v2.5.0)
        </option>        <option value="../../../v2.4.10/tutorials/gpu-executor/">
         v2.4.10
        </option>        <option value="../../../v2.4.9/tutorials/gpu-executor/">
         v2.4.9
        </option>
       </select>
      </div>
      <form action="../../search/" class="sidebar-search-container" method="get" role="search">
       <input aria-label="Search" class="sidebar-search" name="q" placeholder="Search"/>
       <input name="check_keywords" type="hidden" value="yes"/>
       <input name="area" type="hidden" value="default"/>
      </form>
      <div id="searchbox">
      </div>
      <div class="sidebar-scroll">
       <div class="sidebar-tree">
        <p class="caption" role="heading">
         <span class="caption-text">
          Get started
         </span>
        </p>
        <ul>
         <li class="toctree-l1">
          <a class="reference internal" href="../../get-started/neural-search/">
           What is Neural Search?
          </a>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../get-started/install/">
           Install
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-1">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/experimental/windows/">
             Jina on Windows
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../get-started/install/troubleshooting/">
             Troubleshooting
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../get-started/hello-world/">
           Run Quick Demos
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-2">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../get-started/hello-world/fashion/">
             Fashion image search
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../get-started/hello-world/covid-19-chatbot/">
             Covid-19 chatbot
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../get-started/hello-world/multimodal/">
             Multimodal search
            </a>
           </li>
          </ul>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Fundamentals
         </span>
        </p>
        <ul class="current">
         <li class="toctree-l1">
          <a class="reference internal" href="../../fundamentals/concepts/">
           Basic Concepts
          </a>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../fundamentals/document/">
           Document
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-3">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2 has-children">
            <a class="reference internal" href="../../fundamentals/document/document-api/">
             Document
            </a>
            <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/>
            <label for="toctree-checkbox-4">
             <div class="visually-hidden">
              Toggle child pages in navigation
             </div>
             <i class="icon">
              <svg>
               <use href="#svg-arrow-right">
               </use>
              </svg>
             </i>
            </label>
            <ul>
             <li class="toctree-l3">
              <a class="reference internal" href="../../fundamentals/document/fluent-interface/">
               Fluent Interface
              </a>
             </li>
            </ul>
           </li>
           <li class="toctree-l2 has-children">
            <a class="reference internal" href="../../fundamentals/document/documentarray/">
             DocumentArray
            </a>
            <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/>
            <label for="toctree-checkbox-5">
             <div class="visually-hidden">
              Toggle child pages in navigation
             </div>
             <i class="icon">
              <svg>
               <use href="#svg-arrow-right">
               </use>
              </svg>
             </i>
            </label>
            <ul>
             <li class="toctree-l3">
              <a class="reference internal" href="../../fundamentals/document/documentarraymemmap-api/">
               DocumentArrayMemmap
              </a>
             </li>
            </ul>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 current has-children">
          <a class="reference internal" href="../../fundamentals/executor/">
           Executor
          </a>
          <input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-6">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul class="current">
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/executor/executor-api/">
             Create Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/executor/executor-built-in-features/">
             Executor Features
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/executor/executors-in-action/">
             Executor in Action
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/executor/repository-structure/">
             Executor File Structure
            </a>
           </li>
           <li class="toctree-l2 current current-page">
            <a class="current reference internal" href="#">
             Run Executors on GPU
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../fundamentals/flow/">
           Flow
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-7">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/flow-api/">
             Create Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/send-recv/">
             Flow IO
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/add-exec-to-flow/">
             Add Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/topology/">
             Distributed &amp; Parallel Execution
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/async-flow/">
             Asynchronous Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/flow-as-a-service/">
             Serving Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/remarks/">
             Remarks
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1">
          <a class="reference internal" href="../../fundamentals/clean-code/">
           Clean &amp; Efficient Code
          </a>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Data Types
         </span>
        </p>
        <ul>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../datatype/text/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-typography" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M6.21 8.5L4.574 3.594 2.857 8.5H6.21zm.5 1.5l.829 2.487a.75.75 0 001.423-.474L5.735 2.332a1.216 1.216 0 00-2.302-.018l-3.39 9.688a.75.75 0 001.415.496L2.332 10H6.71zm3.13-4.358C10.53 4.374 11.87 4 13 4c1.5 0 3 .939 3 2.601v5.649a.75.75 0 01-1.448.275C13.995 12.82 13.3 13 12.5 13c-.77 0-1.514-.231-2.078-.709-.577-.488-.922-1.199-.922-2.041 0-.694.265-1.411.887-1.944C11 7.78 11.88 7.5 13 7.5h1.5v-.899c0-.54-.5-1.101-1.5-1.101-.869 0-1.528.282-1.84.858a.75.75 0 11-1.32-.716zM14.5 9H13c-.881 0-1.375.22-1.637.444-.253.217-.363.5-.363.806 0 .408.155.697.39.896.249.21.63.354 1.11.354.732 0 1.26-.209 1.588-.449.35-.257.412-.495.412-.551V9z" fill-rule="evenodd">
            </path>
           </svg>
           Text
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-8">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../fuzzy-grep/">
             Fuzzy String Matching in 30 Lines
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/text/full-text-search/">
             Full Text Search via Feature Hashing
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../chatbot/">
             Question-Answering Chatbot via Transformer
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../question-answering-bot/">
             Open-Domain Question-Answering on Long Document
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../datatype/image/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-image" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M1.75 2.5a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h.94a.76.76 0 01.03-.03l6.077-6.078a1.75 1.75 0 012.412-.06L14.5 10.31V2.75a.25.25 0 00-.25-.25H1.75zm12.5 11H4.81l5.048-5.047a.25.25 0 01.344-.009l4.298 3.889v.917a.25.25 0 01-.25.25zm1.75-.25V2.75A1.75 1.75 0 0014.25 1H1.75A1.75 1.75 0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0016 13.25zM5.5 6a.5.5 0 11-1 0 .5.5 0 011 0zM7 6a2 2 0 11-4 0 2 2 0 014 0z" fill-rule="evenodd">
            </path>
           </svg>
           Image
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-9">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/image/image2image/">
             Search Similar Images
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/image/text2image/">
             Search Image from Text via CLIP model
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/image/small-images-inside-big-images/">
             Find Small Images Inside Large Images
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../datatype/video/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-device-camera-video" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M16 3.75a.75.75 0 00-1.136-.643L11 5.425V4.75A1.75 1.75 0 009.25 3h-7.5A1.75 1.75 0 000 4.75v6.5C0 12.216.784 13 1.75 13h7.5A1.75 1.75 0 0011 11.25v-.675l3.864 2.318A.75.75 0 0016 12.25v-8.5zm-5 5.075l3.5 2.1v-5.85l-3.5 2.1v1.65zM9.5 6.75v-2a.25.25 0 00-.25-.25h-7.5a.25.25 0 00-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-4.5z" fill-rule="evenodd">
            </path>
           </svg>
           Video
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-10">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../video-qa/">
             Question-Answering on in-Video Content
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../video-search/">
             Search in-Video Visual Content via Text
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../datatype/audio/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-unmute" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M7.563 2.069A.75.75 0 018 2.75v10.5a.75.75 0 01-1.238.57L3.472 11H1.75A1.75 1.75 0 010 9.25v-2.5C0 5.784.784 5 1.75 5h1.723l3.289-2.82a.75.75 0 01.801-.111zM6.5 4.38L4.238 6.319a.75.75 0 01-.488.181h-2a.25.25 0 00-.25.25v2.5c0 .138.112.25.25.25h2a.75.75 0 01.488.18L6.5 11.62V4.38zm6.096-2.038a.75.75 0 011.06 0 8 8 0 010 11.314.75.75 0 01-1.06-1.06 6.5 6.5 0 000-9.193.75.75 0 010-1.06v-.001zm-1.06 2.121a.75.75 0 10-1.061 1.061 3.5 3.5 0 010 4.95.75.75 0 101.06 1.06 5 5 0 000-7.07l.001-.001z" fill-rule="evenodd">
            </path>
           </svg>
           Audio
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-11">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/audio/similar-audio-search/">
             Search Similar Audios
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../datatype/mesh/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-package" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M8.878.392a1.75 1.75 0 00-1.756 0l-5.25 3.045A1.75 1.75 0 001 4.951v6.098c0 .624.332 1.2.872 1.514l5.25 3.045a1.75 1.75 0 001.756 0l5.25-3.045c.54-.313.872-.89.872-1.514V4.951c0-.624-.332-1.2-.872-1.514L8.878.392zM7.875 1.69a.25.25 0 01.25 0l4.63 2.685L8 7.133 3.245 4.375l4.63-2.685zM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432L2.5 5.677zm6.25 8.271l4.625-2.683a.25.25 0 00.125-.216V5.677L8.75 8.432v5.516z" fill-rule="evenodd">
            </path>
           </svg>
           3D Mesh
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-12">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/mesh/mesh-search/">
             Search Similar 3D Meshes
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../datatype/tabular/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-table" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v3.585a.746.746 0 010 .83v8.085A1.75 1.75 0 0114.25 16H6.309a.748.748 0 01-1.118 0H1.75A1.75 1.75 0 010 14.25V6.165a.746.746 0 010-.83V1.75zM1.5 6.5v7.75c0 .138.112.25.25.25H5v-8H1.5zM5 5H1.5V1.75a.25.25 0 01.25-.25H5V5zm1.5 1.5v8h7.75a.25.25 0 00.25-.25V6.5h-8zm8-1.5h-8V1.5h7.75a.25.25 0 01.25.25V5z" fill-rule="evenodd">
            </path>
           </svg>
           Table
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-13">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/tabular/filter-via-neural-search/">
             Filter Table Rows by Attributes
            </a>
           </li>
          </ul>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Advanced
         </span>
        </p>
        <ul>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../advanced/hub/">
           Share Executors via Hub
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-14">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/hub/hub-portal/">
             Hub Portal
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/hub/create-hub-executor/">
             Create Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/hub/push-executor/">
             Publish Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/hub/use-hub-executor/">
             Use Hub Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/hub/executor-best-practices/">
             Best Practices
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../master-executor/">
             Master Executor: from Zero to Hub
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../advanced/daemon/">
           Remote Executors and Flows via JinaD
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-15">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/jinad-server/">
             JinaD Server
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/jinad-client/">
             JinaD Client
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/remote-executors/">
             Remote Executors
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/workspace/">
             Workspace
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/remote-flows/">
             Remote Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/stream-remote-logs/">
             Remote Logs
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/development-using-jinad/">
             JinaD Development Guides
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../advanced/experimental/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-beaker" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M5 5.782V2.5h-.25a.75.75 0 010-1.5h6.5a.75.75 0 010 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458L5 5.782zM9.5 2.5h-3V6a.75.75 0 01-.117.403L4.73 9h6.54L9.617 6.403A.75.75 0 019.5 6V2.5zm-6.9 9.847L3.775 10.5h8.45l1.175 1.847a.75.75 0 01-.633 1.153H3.233a.75.75 0 01-.633-1.153z" fill-rule="evenodd">
            </path>
           </svg>
           Experimental Features
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-16">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/experimental/kubernetes/">
             Jina on Kubernetes
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/experimental/indexers/">
             Indexers on Jina Hub
            </a>
           </li>
          </ul>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          API Reference
         </span>
        </p>
        <ul>
         <li class="toctree-l1">
          <a class="reference internal" href="../../cli/">
           Jina Command-Line Interface
          </a>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../proto/">
           Jina Protobuf Specification
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-17">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../proto/docs/">
             Protocol Documentation
            </a>
           </li>
          </ul>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Ecosystem
         </span>
        </p>
        <ul>
         <li class="toctree-l1">
          <a class="reference internal" href="#">
           <img class="sidebar-ecosys-logo only-light-line" src="../../_static/search-light.svg"/>
           <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/search-dark.svg"/>
           Jina
          </a>
         </li>
         <li class="toctree-l1">
          <a class="reference external" href="https://hub.jina.ai">
           <img class="sidebar-ecosys-logo only-light-line" src="../../_static/hub-light.svg"/>
           <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/hub-dark.svg"/>
           Jina Hub
          </a>
         </li>
         <li class="toctree-l1">
          <a class="reference external" href="https://finetuner.jina.ai">
           <img class="sidebar-ecosys-logo only-light-line" src="../../_static/finetuner-light.svg"/>
           <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/finetuner-dark.svg"/>
           Finetuner
          </a>
         </li>
        </ul>
       </div>
      </div>
     </div>
    </div>
   </aside>
   <div class="main">
    <div class="content">
     <article role="main">
      <div class="content-icon-container">
       <div class="theme-toggle-container theme-toggle-content">
        <button class="theme-toggle">
         <div class="visually-hidden">
          Toggle Light / Dark / Auto color theme
         </div>
         <svg class="theme-icon-when-auto">
          <use href="#svg-sun-half">
          </use>
         </svg>
         <svg class="theme-icon-when-dark">
          <use href="#svg-moon">
          </use>
         </svg>
         <svg class="theme-icon-when-light">
          <use href="#svg-sun">
          </use>
         </svg>
        </button>
       </div>
       <label class="toc-overlay-icon toc-content-icon" for="__toc">
        <div class="visually-hidden">
         Toggle table of contents sidebar
        </div>
        <i class="icon">
         <svg>
          <use href="#svg-toc">
          </use>
         </svg>
        </i>
       </label>
      </div>
      <section class="tex2jax_ignore mathjax_ignore" id="run-executors-on-gpu">
       <h1>
        Run Executors on GPU
        <a class="headerlink" href="#run-executors-on-gpu" title="Permalink to this headline">
         ¶
        </a>
       </h1>
       <div class="sd-container-fluid sd-sphinx-override sd-p-0 sd-mt-2 sd-mb-4 docutils">
        <div class="sd-row sd-row-cols-2 sd-gx-2 sd-gy-1 docutils">
         <div class="sd-col sd-col-auto sd-d-flex-row sd-align-minor-center docutils">
          <a class="reference external image-reference" href="https://jobs.jina.ai">
           <img alt="" class="sd-avatar-sm sd-outline-muted" src="../../_images/tadej.jpg"/>
          </a>
         </div>
         <div class="sd-col sd-d-flex-row sd-align-minor-center docutils">
          <div class="sd-container-fluid sd-sphinx-override docutils">
           <div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-3 sd-row-cols-md-3 sd-row-cols-lg-3 sd-gx-3 sd-gy-1 docutils">
            <div class="sd-col sd-col-auto sd-d-flex-row sd-align-minor-center docutils">
             <p class="sd-p-0 sd-m-0">
              Tadej @ Jina AI
             </p>
            </div>
            <div class="sd-col sd-col-auto sd-d-flex-row sd-align-minor-center docutils">
             <p class="sd-p-0 sd-m-0">
              <span class="sd-pr-2">
               <svg aria-hidden="true" class="sd-octicon sd-octicon-calendar" height="16.0px" version="1.1" viewbox="0 0 16 16" width="16.0px">
                <path d="M4.75 0a.75.75 0 01.75.75V2h5V.75a.75.75 0 011.5 0V2h1.25c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0113.25 16H2.75A1.75 1.75 0 011 14.25V3.75C1 2.784 1.784 2 2.75 2H4V.75A.75.75 0 014.75 0zm0 3.5h8.5a.25.25 0 01.25.25V6h-11V3.75a.25.25 0 01.25-.25h2zm-2.25 4v6.75c0 .138.112.25.25.25h10.5a.25.25 0 00.25-.25V7.5h-11z" fill-rule="evenodd">
                </path>
               </svg>
              </span>
              Sept. 1, 2021
             </p>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
       <p>
        This tutorial will show you how to use an Executor on a GPU, both locally and in a
Docker container. You will also learn how to use GPU with pre-built Hub executors.
       </p>
       <p>
        Using a GPU allows you to significantly speed up encoding for most deep learning models,
reducing response latency by anything from 5 to 100 times, depending on the model used and
inputs.
       </p>
       <p>
        Jina enables you to use GPUs like you normally would in a Python script, or in a Docker
container - it does not impose any additional requirements or configuration.
       </p>
       <div class="important admonition">
        <p class="admonition-title">
         Important
        </p>
        <p>
         This tutorial assumes you are already familiar with basic Jina concepts, such as Document, Executor, and Flow. Some knowledge of the
         <a class="reference internal" href="../../advanced/hub/">
          <span class="doc std std-doc">
           Hub
          </span>
         </a>
         is also needed for the last part of the tutorial.
        </p>
        <p>
         If you’re not yet familiar with these concepts, first read the
         <a class="reference internal" href="../../fundamentals/concepts/">
          <span class="doc std std-doc">
           Basic Concepts
          </span>
         </a>
         and related documentation, and return to this tutorial once you feel comfortable performing baisc operations in Jina.
        </p>
       </div>
       <section id="prerequisites">
        <h2>
         Prerequisites
         <a class="headerlink" href="#prerequisites" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         For this tutorial, you will need to work on a machine with an NVIDIA graphics card. You
can use various free cloud platforms (like Google Colab or Kaggle kernels), if you do
not have such a machine at home.
        </p>
        <p>
         You will also need to make sure to have a recent version of
         <a class="reference external" href="https://www.nvidia.com/Download/index.aspx">
          NVIDIA drivers
         </a>
         installed. You don’t need to install CUDA for this tutorial, but note that depending on
the deep learning framework that you use, that might be required (for local execution).
        </p>
        <p>
         For the Docker part of the tutorial you will also need to have
         <a class="reference external" href="https://docs.docker.com/get-docker/">
          Docker
         </a>
         and
         <a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html">
          nvidia-docker
         </a>
         installed.
        </p>
        <p>
         To run Python scripts you will need a virtual environment (for example
         <a class="reference external" href="https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/#creating-a-virtual-environment">
          venv
         </a>
         or
         <a class="reference external" href="https://conda.io/projects/conda/en/latest/user-guide/getting-started.html#managing-environments">
          conda
         </a>
         ), and to install Jina inside it using
        </p>
        <div class="highlight-bash notranslate">
         <div class="highlight">
          <pre><span></span>pip install jina
</pre>
         </div>
        </div>
       </section>
       <section id="setting-up-the-executor">
        <h2>
         Setting up the executor
         <a class="headerlink" href="#setting-up-the-executor" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         We will create a simple sentence encoder, and we’ll start by creating the Executor
“skeleton” using Jina’s command line utility:
        </p>
        <div class="highlight-bash notranslate">
         <div class="highlight">
          <pre><span></span>jina hub new
</pre>
         </div>
        </div>
        <p>
         When prompted for inputs, name your encoder
         <code class="docutils literal notranslate">
          <span class="pre">
           SentenceEncoder
          </span>
         </code>
         , and accept the default
folder for it - this will create a
         <code class="docutils literal notranslate">
          <span class="pre">
           SentenceEncoder/
          </span>
         </code>
         folder inside your current
directory, this will be our working directory for this tutorial.
        </p>
        <p>
         Next, select
         <code class="docutils literal notranslate">
          <span class="pre">
           y
          </span>
         </code>
         when prompted for advanced configuration, and leave all other questions
empty, except when you are asked if you want to create a
         <code class="docutils literal notranslate">
          <span class="pre">
           Dockerfile
          </span>
         </code>
         - answer
         <code class="docutils literal notranslate">
          <span class="pre">
           y
          </span>
         </code>
         to
this one (we will need it in the next section). Here’s how this prompt dialogue should
look like in the end
        </p>
        <p>
         <img alt="jina hub new" src="../../_images/hub_new_gpu.png"/>
        </p>
        <p>
         Once this is done, let’s move to the newly created Executor directory:
        </p>
        <div class="highlight-bash notranslate">
         <div class="highlight">
          <pre><span></span><span class="nb">cd</span> SentenceEncoder
</pre>
         </div>
        </div>
        <p>
         Let’s continue by specifying our requirements in
         <code class="docutils literal notranslate">
          <span class="pre">
           requirements.txt
          </span>
         </code>
         file
        </p>
        <div class="highlight-text notranslate">
         <div class="highlight">
          <pre><span></span>sentence-transformers==2.0.0
</pre>
         </div>
        </div>
        <p>
         and installing them using
        </p>
        <div class="highlight-bash notranslate">
         <div class="highlight">
          <pre><span></span>pip install -r requirements.txt
</pre>
         </div>
        </div>
        <div class="info admonition">
         <p class="admonition-title">
          Do I need to install CUDA?
         </p>
         <p>
          All machine learning frameworks rely on CUDA for running on GPU. However, whether you
need CUDA installed on your system or not depends on the framework that you are using.
         </p>
         <p>
          In this tutorial, we are using PyTorch framework, which already includes the necessary
CUDA binaries in its distribution. However, other frameworks, such as Tensorflow, require
you to install CUDA yourself.
         </p>
        </div>
        <div class="tip admonition">
         <p class="admonition-title">
          Install only what you need
         </p>
         <p>
          In this example we are installing the GPU-enabled version of PyTorch, which is the default
version when installing from PyPI. However, if you know that you only need to use your
executor on CPU, you can save a lot of space (100s of MBs, or even GBs) by installing
CPU-only versions of your requirements. This translates into faster start-up times
when using Docker containers.
         </p>
         <p>
          In our case, we could change the
          <code class="docutils literal notranslate">
           <span class="pre">
            requirements.txt
           </span>
          </code>
          file to install a CPU-only version
of PyTorch like this
         </p>
         <div class="highlight-text notranslate">
          <div class="highlight">
           <pre><span></span>-f https://download.pytorch.org/whl/torch_stable.html
sentence-transformers
torch==1.9.0+cpu
</pre>
          </div>
         </div>
        </div>
        <p>
         Now let’s fill the
         <code class="docutils literal notranslate">
          <span class="pre">
           executor.py
          </span>
         </code>
         file with the actual code of our Executor
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">import</span> <span class="nn">torch</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">DocumentArray</span><span class="p">,</span> <span class="n">Executor</span><span class="p">,</span> <span class="n">requests</span>
<span class="kn">from</span> <span class="nn">sentence_transformers</span> <span class="kn">import</span> <span class="n">SentenceTransformer</span>


<span class="k">class</span> <span class="nc">SentenceEncoder</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
    <span class="sd">"""A simple sentence encoder that can be run on a CPU or a GPU</span>

<span class="sd">    :param device: The pytorch device that the model is on, e.g. 'cpu', 'cuda', 'cuda:1'</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">'cpu'</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">SentenceTransformer</span><span class="p">(</span><span class="s1">'all-MiniLM-L6-v2'</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>  <span class="c1"># Move the model to device</span>
</span>
    <span class="nd">@requests</span>
    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DocumentArray</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Add text-based embeddings to all documents"""</span>
        <span class="n">texts</span> <span class="o">=</span> <span class="n">docs</span><span class="o">.</span><span class="n">get_attributes</span><span class="p">(</span><span class="s2">"text"</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
            <span class="n">embeddings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">texts</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">doc</span><span class="p">,</span> <span class="n">embedding</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">embeddings</span><span class="p">):</span>
            <span class="n">doc</span><span class="o">.</span><span class="n">embedding</span> <span class="o">=</span> <span class="n">embedding</span>
</pre>
         </div>
        </div>
        <p>
         Here all the device-specific magic happens on the two highlighted lines - when we create the
         <code class="docutils literal notranslate">
          <span class="pre">
           SentenceEncoder
          </span>
         </code>
         class instance we pass it the device, and then we move the PyTorch
model to our device. These are the exact same steps that you would use in a standalone Python
script as well.
        </p>
        <p>
         To see how we would pass the device we want the Executor to use,
let’s create another file -
         <code class="docutils literal notranslate">
          <span class="pre">
           main.py
          </span>
         </code>
         , which will demonstrate the usage of this
encoder by encoding 10 thousand text documents.
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span><span class="p">,</span> <span class="n">Flow</span>

<span class="kn">from</span> <span class="nn">executor</span> <span class="kn">import</span> <span class="n">SentenceEncoder</span>

<span class="k">def</span> <span class="nf">generate_docs</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10_000</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">Document</span><span class="p">(</span>
            <span class="n">text</span><span class="o">=</span><span class="s1">'Using a GPU allows you to significantly speed up encoding.'</span>
        <span class="p">)</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="n">SentenceEncoder</span><span class="p">,</span> <span class="n">uses_with</span><span class="o">=</span><span class="p">{</span><span class="s1">'device'</span><span class="p">:</span> <span class="s1">'cpu'</span><span class="p">})</span>
<span class="k">with</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/encode'</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">generate_docs</span><span class="p">,</span> <span class="n">show_progress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">request_size</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</pre>
         </div>
        </div>
        <p>
         Let’s try it out by running
        </p>
        <div class="highlight-bash notranslate">
         <div class="highlight">
          <pre><span></span>python main.py
</pre>
         </div>
        </div>
        <div class="highlight-console notranslate">
         <div class="highlight">
          <pre><span></span><span class="go">      executor0@26554[L]:ready and listening</span>
<span class="go">        gateway@26554[L]:ready and listening</span>
<span class="go">           Flow@26554[I]:🎉 Flow is ready to use!</span>
<span class="go">        🔗 Protocol:            GRPC</span>
<span class="go">        🏠 Local access:        0.0.0.0:56969</span>
<span class="go">        🔒 Private network:     172.31.39.70:56969</span>
<span class="go">        🌐 Public address:      52.59.231.246:56969</span>
<span class="go">Working... ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸━━━━━━ 0:00:22 13.8 step/s 314 steps done in 22 seconds</span>
</pre>
         </div>
        </div>
       </section>
       <section id="using-gpu-locally">
        <h2>
         Using GPU locally
         <a class="headerlink" href="#using-gpu-locally" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         By now you can already see how easy it is to use the encoder on a GPU - simply set the device on initialization to
         <code class="docutils literal notranslate">
          <span class="pre">
           'cuda'
          </span>
         </code>
        </p>
        <div class="highlight-diff notranslate">
         <div class="highlight">
          <pre><span></span><span class="gi">+ f = Flow().add(uses=SentenceEncoder, uses_with={'device': 'cuda'})</span>
<span class="gd">- f = Flow().add(uses=SentenceEncoder, uses_with={'device': 'cpu'})</span>
</pre>
         </div>
        </div>
        <p>
         Let’s see how much faster the GPU is, compared to CPU. The following
comparison was made on
         <code class="docutils literal notranslate">
          <span class="pre">
           g4dn.xlarge
          </span>
         </code>
         AWS instance, which has a single NVIDIA T4 GPU attached.
        </p>
        <p>
         First, we need to make sure that the encoder is using the GPU - change the
         <code class="docutils literal notranslate">
          <span class="pre">
           'device'
          </span>
         </code>
         parameter in
         <code class="docutils literal notranslate">
          <span class="pre">
           main.py
          </span>
         </code>
         , as shown in the snippet above. With that done, let’s run the benchmark again
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="n">python</span> <span class="n">main</span><span class="o">.</span><span class="n">py</span>
</pre>
         </div>
        </div>
        <div class="highlight-console notranslate">
         <div class="highlight">
          <pre><span></span><span class="go">      executor0@21032[L]:ready and listening</span>
<span class="go">        gateway@21032[L]:ready and listening</span>
<span class="go">           Flow@21032[I]:🎉 Flow is ready to use!</span>
<span class="go">        🔗 Protocol:            GRPC</span>
<span class="go">        🏠 Local access:        0.0.0.0:54255</span>
<span class="go">        🔒 Private network:     172.31.39.70:54255</span>
<span class="go">        🌐 Public address:      52.59.231.246:54255</span>
<span class="go">Working... ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸━━━━━━ 0:00:02 104.9 step/s 314 steps done in 2 seconds</span>
</pre>
         </div>
        </div>
        <p>
         We can see that we got over 7x speedup! And that’s not even the best we can do - if we increase the batch size to max out the GPU’s memory we would get even larger speedups. But such optimizations are beyond the scope of this tutorial.
        </p>
        <div class="note admonition">
         <p class="admonition-title">
          Note
         </p>
         <p>
          You have probably noticed that there was a delay (about 3 seconds) when creating the Flow.
This occured because the weights of our model needed to be transfered from CPU to GPU when we
initialized the Executor. However, this action only occurs once in the lifetime of the Executor,
so for most use cases this is not something we would worry about.
         </p>
        </div>
       </section>
       <section id="using-gpu-in-a-container">
        <h2>
         Using GPU in a container
         <a class="headerlink" href="#using-gpu-in-a-container" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         When you’ll be using your Executor in production you will most likely want to put it in a Docker container, to provide proper environment isolation and to be able to use it easily on any device.
        </p>
        <p>
         Using GPU-enabled Executors in this case is no harder than using them locally. In this case we don’t even need to modify the default
         <code class="docutils literal notranslate">
          <span class="pre">
           Dockerfile
          </span>
         </code>
         .
        </p>
        <div class="admonition-choosing-the-right-base-image admonition">
         <p class="admonition-title">
          Choosing the right base image
         </p>
         <p>
          In our case we are using the default
          <code class="docutils literal notranslate">
           <span class="pre">
            jinaai/jina:latest
           </span>
          </code>
          base image. However, parallel to the comments about having to install CUDA locally, you might need to use a different base image, depending on the framework you are using.
         </p>
         <p>
          If you need to have CUDA installed in the image, you usually have two options: either you take the
          <code class="docutils literal notranslate">
           <span class="pre">
            nvidia/cuda
           </span>
          </code>
          for the base image, or you take the official GPU-enabled image of the framework you are using, for example,
          <code class="docutils literal notranslate">
           <span class="pre">
            tensorflow/tensorflow:2.6.0-gpu
           </span>
          </code>
          .
         </p>
        </div>
        <p>
         The other file we care about in this case is
         <code class="docutils literal notranslate">
          <span class="pre">
           config.yml
          </span>
         </code>
         , and here the default version works as well. So let’s build the Docker image
        </p>
        <div class="highlight-bash notranslate">
         <div class="highlight">
          <pre><span></span>docker build -t sentence-encoder .
</pre>
         </div>
        </div>
        <p>
         You can run the container to quickly check that everything is working well
        </p>
        <div class="highlight-bash notranslate">
         <div class="highlight">
          <pre><span></span>docker run sentence-encoder
</pre>
         </div>
        </div>
        <p>
         Now, let’s use the Docker version of our encoder with the GPU. If you’ve dealt with GPUs in containers before, you probably remember that to use a GPU insite the container you need to pass
         <code class="docutils literal notranslate">
          <span class="pre">
           --gpus
          </span>
          <span class="pre">
           all
          </span>
         </code>
         option to the
         <code class="docutils literal notranslate">
          <span class="pre">
           docker
          </span>
          <span class="pre">
           run
          </span>
         </code>
         command. And Jina enables you to do just that.
        </p>
        <p>
         Here’s how we need to modify our
         <code class="docutils literal notranslate">
          <span class="pre">
           main.py
          </span>
         </code>
         script to use a GPU-base containerized Executor
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Document</span><span class="p">,</span> <span class="n">DocumentArray</span><span class="p">,</span> <span class="n">Flow</span>

<span class="kn">from</span> <span class="nn">executor</span> <span class="kn">import</span> <span class="n">SentenceEncoder</span>

<span class="k">def</span> <span class="nf">generate_docs</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">Document</span><span class="p">(</span>
            <span class="n">text</span><span class="o">=</span><span class="s1">'Using a GPU enables you to significantly speed up encoding'</span>
        <span class="p">)</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<span class="hll">    <span class="n">uses</span><span class="o">=</span><span class="s1">'docker://sentence-encoder'</span><span class="p">,</span> <span class="n">uses_with</span><span class="o">=</span><span class="p">{</span><span class="s1">'device'</span><span class="p">:</span> <span class="s1">'cuda'</span><span class="p">},</span> <span class="n">gpus</span><span class="o">=</span><span class="s1">'all'</span>
</span><span class="p">)</span>
<span class="k">with</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/encode'</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">generate_docs</span><span class="p">,</span> <span class="n">show_progress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">request_size</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</pre>
         </div>
        </div>
        <p>
         If we run this with
         <code class="docutils literal notranslate">
          <span class="pre">
           python
          </span>
          <span class="pre">
           main.py
          </span>
         </code>
         , we’ll get the same output as before, except that now we’ll also get the output from the Docker container.
        </p>
        <p>
         You may notice that every time we start the Executor, the transformer model gets downloaded again. To speed this up, we would want the encoder to load the model from a file which we have pre-downloaded to our disk.
        </p>
        <p>
         We can do this with Docker volumes - Jina will simply pass the argument to the Docker container. Here’s how we modify the
         <code class="docutils literal notranslate">
          <span class="pre">
           main.py
          </span>
         </code>
         to allow that
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">uses</span><span class="o">=</span><span class="s1">'docker://sentence-encoder'</span><span class="p">,</span>
    <span class="n">uses_with</span><span class="o">=</span><span class="p">{</span><span class="s1">'device'</span><span class="p">:</span> <span class="s1">'cuda'</span><span class="p">},</span>
    <span class="n">gpus</span><span class="o">=</span><span class="s1">'all'</span><span class="p">,</span>
    <span class="c1"># This has to be an absolute path, replace /home/ubuntu with your home directory</span>
    <span class="n">volumes</span><span class="o">=</span><span class="s2">"/home/ubuntu/.cache:/root/.cache"</span><span class="p">,</span>
<span class="p">)</span>
</pre>
         </div>
        </div>
        <p>
         Here we mounted the
         <code class="docutils literal notranslate">
          <span class="pre">
           ~/.cache
          </span>
         </code>
         directory, because this is where pre-built transformer models are saved in our case. But this could also be any custom directory - depends on the Python package you are using, and how you specify the model loading path.
        </p>
        <p>
         Now, if we run
         <code class="docutils literal notranslate">
          <span class="pre">
           python
          </span>
          <span class="pre">
           main.py
          </span>
         </code>
         again you can see that no downloading happens inside the container, and that the encoding starts faster.
        </p>
       </section>
       <section id="using-gpu-with-hub-executors">
        <h2>
         Using GPU with Hub Executors
         <a class="headerlink" href="#using-gpu-with-hub-executors" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         We now saw how to use GPU with our Executor locally, and when using it in a Docker container. What about when we use Executors from Jina Hub, is there any difference?
        </p>
        <p>
         Nope! Not only that, many of the Executors on Jina Hub already come with a GPU-enabled version pre-built, usually under the
         <code class="docutils literal notranslate">
          <span class="pre">
           gpu
          </span>
         </code>
         tag (see
         <a class="reference internal" href="../../advanced/hub/push-executor/#hub-tags">
          <span class="std std-ref">
           Jina Hub tags
          </span>
         </a>
         ). Let’s modify our example to use the pre-built
         <code class="docutils literal notranslate">
          <span class="pre">
           TransformerTorchEncoder
          </span>
         </code>
         from Jina Hub
        </p>
        <div class="highlight-diff notranslate">
         <div class="highlight">
          <pre><span></span>f = Flow().add(
<span class="gd">-   uses='docker://sentence-encoder',</span>
<span class="gi">+   uses='jinahub+docker://TransformerTorchEncoder/gpu',</span>
    uses_with={'device': 'cuda'},
    gpus='all',
    # This has to be an absolute path, replace /home/ubuntu with your home directory
    volumes="/home/ubuntu/.cache:/root/.cache",
)
</pre>
         </div>
        </div>
        <p>
         You’ll see that the first time you run the script, downloading the Docker image will take some time - GPU images are large! But after that, everything will work just as it did with your local Docker image, out of the box.
        </p>
        <div class="important admonition">
         <p class="admonition-title">
          Important
         </p>
         <p>
          When using GPU encoders from Jina Hub, always use
          <code class="docutils literal notranslate">
           <span class="pre">
            jinahub+docker://
           </span>
          </code>
          , and not
          <code class="docutils literal notranslate">
           <span class="pre">
            jinahub://
           </span>
          </code>
          . As discussed above, these encoders might need CUDA installed (or other system dependencies), and installing that properly can be tricky. For that reason, you should prefer using Docker images, which already come with all these dependencies pre-installed.
         </p>
        </div>
       </section>
       <section id="conclusion">
        <h2>
         Conclusion
         <a class="headerlink" href="#conclusion" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         Let’s recap what we saw in this tutorial:
        </p>
        <ol class="simple">
         <li>
          <p>
           Using Executors on a GPU locally is no different than using GPU in a standalone script. You can pass the device you want your Executor to use in the initialization.
          </p>
         </li>
         <li>
          <p>
           To use an Executor on a GPU inside a Docker container, make sure to pass
           <code class="docutils literal notranslate">
            <span class="pre">
             gpus='all'
            </span>
           </code>
          </p>
         </li>
         <li>
          <p>
           Use volumes (bind mounts), so you don’t have to download large files each time you start the Executor
          </p>
         </li>
         <li>
          <p>
           You can use GPU with Executors from Jina Hub, just make sure to use the Executor with the
           <code class="docutils literal notranslate">
            <span class="pre">
             gpu
            </span>
           </code>
           tag
          </p>
         </li>
        </ol>
        <p>
         And when you start building your own Executor, always remember to check what system requirements (CUDA and similar) are needed, and install them locally (and in the
         <code class="docutils literal notranslate">
          <span class="pre">
           Dockerfile
          </span>
         </code>
         ) accordingly
        </p>
       </section>
      </section>
     </article>
     <footer>
      <div class="related-pages">
       <a class="next-page" href="../../fundamentals/flow/">
        <div class="page-info">
         <div class="context">
          <span>
           Next
          </span>
         </div>
         <div class="title">
          Flow
         </div>
        </div>
        <svg>
         <use href="#svg-arrow-right">
         </use>
        </svg>
       </a>
       <a class="prev-page" href="../../fundamentals/executor/repository-structure/">
        <svg>
         <use href="#svg-arrow-right">
         </use>
        </svg>
        <div class="page-info">
         <div class="context">
          <span>
           Previous
          </span>
         </div>
         <div class="title">
          Executor File Structure
         </div>
        </div>
       </a>
      </div>
      <div class="related-information sd-d-inline-flex">
       <a href="https://jina.ai">
        Copyright © Jina AI Limited. All rights reserved.
       </a>
       Last updated on Dec 01, 2021.
       <div class="social-btns">
        <a aria-label="GitHub" class="social-btn" href="https://github.com/jina-ai/jina/" rel="noreferrer" target="_blank">
         <i class="fab fa-github">
         </i>
        </a>
        <a aria-label="Slack" class="social-btn" href="https://slack.jina.ai" rel="noreferrer" target="_blank">
         <i class="fab fa-slack">
         </i>
        </a>
        <a aria-label="YouTube" class="social-btn" href="https://youtube.com/c/jina-ai" rel="noreferrer" target="_blank">
         <i class="fab fa-youtube">
         </i>
        </a>
        <a aria-label="Twitter" class="social-btn" href="https://twitter.com/JinaAI_" rel="noreferrer" target="_blank">
         <i class="fab fa-twitter">
         </i>
        </a>
        <a aria-label="LinkedIn" class="social-btn" href="https://www.linkedin.com/company/jinaai/" rel="noreferrer" target="_blank">
         <i class="fab fa-linkedin">
         </i>
        </a>
       </div>
      </div>
     </footer>
    </div>
    <aside class="toc-drawer" id="toc-drawer">
     <div class="toc-sticky toc-scroll">
      <div class="toc-title-container">
       <span class="toc-title">
        Contents
       </span>
      </div>
      <div class="toc-tree-container">
       <div class="toc-tree">
        <ul>
         <li>
          <a class="reference internal" href="#">
           Run Executors on GPU
          </a>
          <ul>
           <li>
            <a class="reference internal" href="#prerequisites">
             Prerequisites
            </a>
           </li>
           <li>
            <a class="reference internal" href="#setting-up-the-executor">
             Setting up the executor
            </a>
           </li>
           <li>
            <a class="reference internal" href="#using-gpu-locally">
             Using GPU locally
            </a>
           </li>
           <li>
            <a class="reference internal" href="#using-gpu-in-a-container">
             Using GPU in a container
            </a>
           </li>
           <li>
            <a class="reference internal" href="#using-gpu-with-hub-executors">
             Using GPU with Hub Executors
            </a>
           </li>
           <li>
            <a class="reference internal" href="#conclusion">
             Conclusion
            </a>
           </li>
          </ul>
         </li>
        </ul>
       </div>
      </div>
      <details class="jina-doc-bot sd-sphinx-override sd-dropdown sd-card" id="jina-docbot" v-bind:class="{ready: ready}">
       <summary class="sd-summary-title sd-card-header">
        <svg aria-hidden="true" class="sd-octicon sd-octicon-comment-discussion" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
         <path d="M1.5 2.75a.25.25 0 01.25-.25h8.5a.25.25 0 01.25.25v5.5a.25.25 0 01-.25.25h-3.5a.75.75 0 00-.53.22L3.5 11.44V9.25a.75.75 0 00-.75-.75h-1a.25.25 0 01-.25-.25v-5.5zM1.75 1A1.75 1.75 0 000 2.75v5.5C0 9.216.784 10 1.75 10H2v1.543a1.457 1.457 0 002.487 1.03L7.061 10h3.189A1.75 1.75 0 0012 8.25v-5.5A1.75 1.75 0 0010.25 1h-8.5zM14.5 4.75a.25.25 0 00-.25-.25h-.5a.75.75 0 110-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0114.25 12H14v1.543a1.457 1.457 0 01-2.487 1.03L9.22 12.28a.75.75 0 111.06-1.06l2.22 2.22v-2.19a.75.75 0 01.75-.75h1a.25.25 0 00.25-.25v-5.5z" fill-rule="evenodd">
         </path>
        </svg>
        Ask our docs!
        <div class="sd-summary-down docutils">
         <svg aria-hidden="true" class="sd-octicon sd-octicon-chevron-down" height="1.5em" version="1.1" viewbox="0 0 24 24" width="1.5em">
          <path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd">
          </path>
         </svg>
        </div>
        <div class="sd-summary-up docutils">
         <svg aria-hidden="true" class="sd-octicon sd-octicon-chevron-up" height="1.5em" version="1.1" viewbox="0 0 24 24" width="1.5em">
          <path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd">
          </path>
         </svg>
        </div>
       </summary>
       <div class="sd-summary-content docutils">
        <div class="jina-doc-answer">
         <div class="jina-doc-answer-hint" v-if="qa_pairs.length===0">
          <p class="jina-doc-bot-help-text sd-font-weight-bold" v-if="!ready">
           Chat loading...
           <br/>
           <br/>
           You can think of questions while our bot load. Try:
          </p>
          <p class="jina-doc-bot-help-text sd-font-weight-bold hidden-before-ready" v-else="">
           You can ask questions about our docs. Try:
          </p>
          <ul class="example-question simple sd-font-weight-light">
           <li>
            <p>
             Does Jina support Kubernetes?
            </p>
           </li>
           <li>
            <p>
             How can I traverse a nested DocumentArray?
            </p>
           </li>
           <li>
            <p>
             What are the basic concepts in Jina?
            </p>
           </li>
          </ul>
         </div>
         <div class="jina-doc-answer-dialog hidden-before-ready" v-else="">
          <div class="qa-container" v-for="qa in qa_pairs">
           <div class="sd-text-right" v-if="qa.question">
            <div class="talk-bubble question-bubble">
             <div class="talktext">
              <p>
               ${qa.question}
              </p>
             </div>
            </div>
           </div>
           <div class="talk-bubble answer-bubble">
            <div class="talktext">
             <p v-if="qa.answer">
              ${qa.answer.text}
             </p>
             <div v-else="">
              <svg class="loader" height="10" width="40">
               <circle class="dot" cx="10" cy="5" r="3">
               </circle>
               <circle class="dot" cx="20" cy="5" r="3">
               </circle>
               <circle class="dot" cx="30" cy="5" r="3">
               </circle>
              </svg>
             </div>
            </div>
            <a class="answer-reference" href="https://slack.jina.ai" target="_blank" v-if="qa.answer &amp;&amp; is_conn_broken">
             Report
            </a>
            <div class="feedback-tooltip sd-d-flex-row" v-if="qa.answer &amp;&amp; !is_conn_broken &amp;&amp; qa.answer.uri">
             <a :href="root_url + qa.answer.uri" class="answer-reference">
              Source
             </a>
             <div class="sd-d-flex-row">
              <div class="thumb-answer thumbup" style="margin: 0 6px" v-on:click="submit_rating(qa, true)" v-show="qa.rating===null">
               <svg aria-hidden="true" class="sd-octicon sd-octicon-thumbsup" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
                <path d="M8.834.066C7.494-.087 6.5 1.048 6.5 2.25v.5c0 1.329-.647 2.124-1.318 2.614-.328.24-.66.403-.918.508A1.75 1.75 0 002.75 5h-1A1.75 1.75 0 000 6.75v7.5C0 15.216.784 16 1.75 16h1a1.75 1.75 0 001.662-1.201c.525.075 1.067.229 1.725.415.152.043.31.088.475.133 1.154.32 2.54.653 4.388.653 1.706 0 2.97-.153 3.722-1.14.353-.463.537-1.042.668-1.672.118-.56.208-1.243.313-2.033l.04-.306c.25-1.869.265-3.318-.188-4.316a2.418 2.418 0 00-1.137-1.2C13.924 5.085 13.353 5 12.75 5h-1.422l.015-.113c.07-.518.157-1.17.157-1.637 0-.922-.151-1.719-.656-2.3-.51-.589-1.247-.797-2.01-.884zM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.922.922 0 00-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.861 5.861 0 01-1.567.81V13.3zM2.75 6.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-1a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25h1z" fill-rule="evenodd">
                </path>
               </svg>
              </div>
              <div class="thumb-answer thumbdown" v-on:click="submit_rating(qa, false)" v-show="qa.rating===null">
               <svg aria-hidden="true" class="sd-octicon sd-octicon-thumbsdown" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
                <path d="M7.083 15.986c1.34.153 2.334-.982 2.334-2.183v-.5c0-1.329.646-2.123 1.317-2.614.329-.24.66-.403.919-.508a1.75 1.75 0 001.514.872h1a1.75 1.75 0 001.75-1.75v-7.5a1.75 1.75 0 00-1.75-1.75h-1a1.75 1.75 0 00-1.662 1.2c-.525-.074-1.068-.228-1.726-.415L9.305.705C8.151.385 6.765.053 4.917.053c-1.706 0-2.97.152-3.722 1.139-.353.463-.537 1.042-.669 1.672C.41 3.424.32 4.108.214 4.897l-.04.306c-.25 1.869-.266 3.318.188 4.316.244.537.622.943 1.136 1.2.495.248 1.066.334 1.669.334h1.422l-.015.112c-.07.518-.157 1.17-.157 1.638 0 .921.151 1.718.655 2.299.512.589 1.248.797 2.011.884zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479a63.914 63.914 0 00-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.921.921 0 00.443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.862 5.862 0 011.568-.809V2.754zm1.75 6.798a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25h1a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-1z" fill-rule="evenodd">
                </path>
               </svg>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="jina-doc-bot-controls sd-d-flex-row sd-border-1">
         <textarea :disabled="!ready" :placeholder="'Type your question here'" :readonly="is_busy" autofocus="" class="sd-border-0" disabled="" id="bot-input-question" maxlength="100" placeholder="Just a moment, please ..." rows="3" style="width: 100%" v-model="cur_question" v-on:keyup.enter="submit_q"></textarea>
         <button class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-outline-primary sd-rounded-0 hidden-before-ready" id="bot-input-btn" v-on:click="submit_q" v-show="cur_question.length&gt;0 &amp;&amp; !is_busy">
          <svg aria-hidden="true" class="sd-octicon sd-octicon-paper-airplane" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
           <path d="M1.592 2.712L2.38 7.25h4.87a.75.75 0 110 1.5H2.38l-.788 4.538L13.929 8 1.592 2.712zM.989 8L.064 2.68a1.341 1.341 0 011.85-1.462l13.402 5.744a1.13 1.13 0 010 2.076L1.913 14.782a1.341 1.341 0 01-1.85-1.463L.99 8z" fill-rule="evenodd">
           </path>
          </svg>
         </button>
        </div>
        <div class="powered-by">
        </div>
       </div>
      </details>
     </div>
    </aside>
   </div>
  </div>
  <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js">
  </script>
  <script src="../../_static/jquery.js">
  </script>
  <script src="../../_static/underscore.js">
  </script>
  <script src="../../_static/doctools.js">
  </script>
  <script src="../../_static/scripts/main.js">
  </script>
  <script src="../../_static/clipboard.min.js">
  </script>
  <script src="../../_static/copybutton.js">
  </script>
  <script src="../../_static/tabs.js">
  </script>
  <script src="../../_static/design-tabs.js">
  </script>
  <script>
   var server_address = 'https://docsbot.jina.ai';
  </script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js">
  </script>
  <script src="../../_static/docbot.js">
  </script>
  <script src="../../_static/iframe.js">
  </script>
 </body>
</html>