<!DOCTYPE html>
<html class="no-js" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="light dark" name="color-scheme"/>
  <meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator">
   <meta content="Question-Answering Chatbot via Transformer" property="og:title"/>
   <meta content="website" property="og:type"/>
   <meta content="https://docs.jina.ai/tutorials/chatbot.html" property="og:url"/>
   <meta content="Jina 2.5.1 Documentation" property="og:site_name"/>
   <meta content="Susana @ Jina AI June 15, 2021 We will use the hello world chatbot for this tutorial. You can find the complete code here and we will go step by step. At the end of this tutorial, you will have your own chatbot. You will use text as an input and get a text result as output. For this example, we w..." property="og:description"/>
   <meta content="https://docs.jina.ai/_images/susana.jpg" property="og:image"/>
   <meta content="" property="og:image:alt"/>
   <meta content="summary_large_image" name="twitter:card"/>
   <meta content="@JinaAI_" name="twitter:site"/>
   <meta content="@JinaAI_" name="twitter:creator"/>
   <meta content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning" name="description"/>
   <meta content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning" property="og:description"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-48ZDWC8GT6">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-48ZDWC8GT6');
   </script>
   <script async="" defer="" src="https://buttons.github.io/buttons.js">
   </script>
   <link href="../../genindex/" rel="index" title="Index"/>
   <link href="../../search/" rel="search" title="Search"/>
   <link href="../question-answering-bot/" rel="next" title="Open-Domain Question-Answering on Long Document"/>
   <link href="../../datatype/text/full-text-search/" rel="prev" title="Full Text Search via Feature Hashing"/>
   <link href="../../_static/favicon.ico" rel="shortcut icon"/>
   <meta content="sphinx-4.3.1, furo 2021.10.09" name="generator">
    <title>
     Question-Answering Chatbot via Transformer - Jina 2.5.1 documentation
    </title>
    <link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
    <link href="../../_static/styles/furo.css?digest=0254c309f5cadf746f1a613e7677379ac9c8cdcd" rel="stylesheet" type="text/css"/>
    <link href="../../_static/copybutton.css" rel="stylesheet" type="text/css"/>
    <link href="../../_static/tabs.css" rel="stylesheet" type="text/css"/>
    <link href="../../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../_static/styles/furo-extensions.css?digest=16fb25fabf47304eee183a5e9af80b1ba98259b1" rel="stylesheet" type="text/css"/>
    <link href="../../_static/main.css" rel="stylesheet" type="text/css"/>
    <link href="../../_static/docbot.css" rel="stylesheet" type="text/css"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" rel="stylesheet" type="text/css"/>
    <style>
     body {
    --color-code-background: #ffffff;
  --color-code-foreground: #4d4d4d;
  --color-brand-primary: #009191;
  --color-brand-content: #009191;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
    }
  }
    </style>
   </meta>
  </meta>
 </head>
 <body>
  <script>
   document.body.dataset.theme = localStorage.getItem("theme") || "auto";
  </script>
  <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
   <symbol id="svg-toc" viewbox="0 0 24 24">
    <title>
     Contents
    </title>
    <svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <path d="M0 0h24v24H0z" stroke="none">
     </path>
     <line x1="4" x2="20" y1="6" y2="6">
     </line>
     <line x1="10" x2="20" y1="12" y2="12">
     </line>
     <line x1="6" x2="20" y1="18" y2="18">
     </line>
    </svg>
   </symbol>
   <symbol id="svg-menu" viewbox="0 0 24 24">
    <title>
     Menu
    </title>
    <svg class="feather-menu" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <line x1="3" x2="21" y1="12" y2="12">
     </line>
     <line x1="3" x2="21" y1="6" y2="6">
     </line>
     <line x1="3" x2="21" y1="18" y2="18">
     </line>
    </svg>
   </symbol>
   <symbol id="svg-arrow-right" viewbox="0 0 24 24">
    <title>
     Expand
    </title>
    <svg class="feather-chevron-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <polyline points="9 18 15 12 9 6">
     </polyline>
    </svg>
   </symbol>
   <symbol id="svg-sun" viewbox="0 0 24 24">
    <title>
     Light mode
    </title>
    <svg class="feather-sun" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <circle cx="12" cy="12" r="5">
     </circle>
     <line x1="12" x2="12" y1="1" y2="3">
     </line>
     <line x1="12" x2="12" y1="21" y2="23">
     </line>
     <line x1="4.22" x2="5.64" y1="4.22" y2="5.64">
     </line>
     <line x1="18.36" x2="19.78" y1="18.36" y2="19.78">
     </line>
     <line x1="1" x2="3" y1="12" y2="12">
     </line>
     <line x1="21" x2="23" y1="12" y2="12">
     </line>
     <line x1="4.22" x2="5.64" y1="19.78" y2="18.36">
     </line>
     <line x1="18.36" x2="19.78" y1="5.64" y2="4.22">
     </line>
    </svg>
   </symbol>
   <symbol id="svg-moon" viewbox="0 0 24 24">
    <title>
     Dark mode
    </title>
    <svg class="icon-tabler-moon" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <path d="M0 0h24v24H0z" fill="none" stroke="none">
     </path>
     <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z">
     </path>
    </svg>
   </symbol>
   <symbol id="svg-sun-half" viewbox="0 0 24 24">
    <title>
     Auto light/dark mode
    </title>
    <svg class="icon-tabler-shadow" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <path d="M0 0h24v24H0z" fill="none" stroke="none">
     </path>
     <circle cx="12" cy="12" r="9">
     </circle>
     <path d="M13 12h5">
     </path>
     <path d="M13 15h4">
     </path>
     <path d="M13 18h1">
     </path>
     <path d="M13 9h4">
     </path>
     <path d="M13 6h1">
     </path>
    </svg>
   </symbol>
  </svg>
  <input class="sidebar-toggle" id="__navigation" name="__navigation" type="checkbox"/>
  <input class="sidebar-toggle" id="__toc" name="__toc" type="checkbox"/>
  <label class="overlay sidebar-overlay" for="__navigation">
   <div class="visually-hidden">
    Hide navigation sidebar
   </div>
  </label>
  <label class="overlay toc-overlay" for="__toc">
   <div class="visually-hidden">
    Hide table of contents sidebar
   </div>
  </label>
  <div class="page">
   <header class="mobile-header" id="mobile-header">
    <div class="header-left">
     <label class="nav-overlay-icon" for="__navigation">
      <div class="visually-hidden">
       Toggle site navigation sidebar
      </div>
      <i class="icon">
       <svg>
        <use href="#svg-menu">
        </use>
       </svg>
      </i>
     </label>
    </div>
    <div class="header-center">
     <a href="../../">
      <div class="brand">
       Jina 2.5.1 documentation
      </div>
     </a>
    </div>
    <div class="header-right">
     <div class="theme-toggle-container theme-toggle-header">
      <button class="theme-toggle">
       <div class="visually-hidden">
        Toggle Light / Dark / Auto color theme
       </div>
       <svg class="theme-icon-when-auto">
        <use href="#svg-sun-half">
        </use>
       </svg>
       <svg class="theme-icon-when-dark">
        <use href="#svg-moon">
        </use>
       </svg>
       <svg class="theme-icon-when-light">
        <use href="#svg-sun">
        </use>
       </svg>
      </button>
     </div>
     <label class="toc-overlay-icon toc-header-icon" for="__toc">
      <div class="visually-hidden">
       Toggle table of contents sidebar
      </div>
      <i class="icon">
       <svg>
        <use href="#svg-toc">
        </use>
       </svg>
      </i>
     </label>
    </div>
   </header>
   <aside class="sidebar-drawer" id="sidebar-drawer">
    <div class="sidebar-container">
     <div class="sidebar-sticky">
      <a class="sidebar-brand" href="../../">
       <div class="sidebar-logo-container">
        <img alt="Light Logo" class="sidebar-logo only-light" src="../../_static/logo-light.svg"/>
        <img alt="Dark Logo" class="sidebar-logo only-dark" src="../../_static/logo-dark.svg"/>
       </div>
      </a>
      <div class="sd-d-flex-row sd-align-major-spaced">
       <a aria-label="Star jina-ai/jina on GitHub" class="github-button" data-icon="octicon-star" data-show-count="true" href="https://github.com/jina-ai/jina" style="opacity: 0;">
        Star
       </a>
       <select class="version-select" onchange="window.location.href=this.value">
        <option selected="selected" value="master/tutorials/chatbot/">
         master
        </option>        <option value="../../../tutorials/chatbot/">
         latest(v2.5.0)
        </option>        <option value="../../../v2.4.10/tutorials/chatbot/">
         v2.4.10
        </option>        <option value="../../../v2.4.9/tutorials/chatbot/">
         v2.4.9
        </option>
       </select>
      </div>
      <form action="../../search/" class="sidebar-search-container" method="get" role="search">
       <input aria-label="Search" class="sidebar-search" name="q" placeholder="Search"/>
       <input name="check_keywords" type="hidden" value="yes"/>
       <input name="area" type="hidden" value="default"/>
      </form>
      <div id="searchbox">
      </div>
      <div class="sidebar-scroll">
       <div class="sidebar-tree">
        <p class="caption" role="heading">
         <span class="caption-text">
          Get started
         </span>
        </p>
        <ul>
         <li class="toctree-l1">
          <a class="reference internal" href="../../get-started/neural-search/">
           What is Neural Search?
          </a>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../get-started/install/">
           Install
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox">
           <label for="toctree-checkbox-1">
            <div class="visually-hidden">
             Toggle child pages in navigation
            </div>
            <i class="icon">
             <svg>
              <use href="#svg-arrow-right">
              </use>
             </svg>
            </i>
           </label>
           <ul>
            <li class="toctree-l2">
             <a class="reference internal" href="../../advanced/experimental/windows/">
              Jina on Windows
             </a>
            </li>
            <li class="toctree-l2">
             <a class="reference internal" href="../../get-started/install/troubleshooting/">
              Troubleshooting
             </a>
            </li>
           </ul>
          </input>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../get-started/hello-world/">
           Run Quick Demos
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox">
           <label for="toctree-checkbox-2">
            <div class="visually-hidden">
             Toggle child pages in navigation
            </div>
            <i class="icon">
             <svg>
              <use href="#svg-arrow-right">
              </use>
             </svg>
            </i>
           </label>
           <ul>
            <li class="toctree-l2">
             <a class="reference internal" href="../../get-started/hello-world/fashion/">
              Fashion image search
             </a>
            </li>
            <li class="toctree-l2">
             <a class="reference internal" href="../../get-started/hello-world/covid-19-chatbot/">
              Covid-19 chatbot
             </a>
            </li>
            <li class="toctree-l2">
             <a class="reference internal" href="../../get-started/hello-world/multimodal/">
              Multimodal search
             </a>
            </li>
           </ul>
          </input>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Fundamentals
         </span>
        </p>
        <ul>
         <li class="toctree-l1">
          <a class="reference internal" href="../../fundamentals/concepts/">
           Basic Concepts
          </a>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../fundamentals/document/">
           Document
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox">
           <label for="toctree-checkbox-3">
            <div class="visually-hidden">
             Toggle child pages in navigation
            </div>
            <i class="icon">
             <svg>
              <use href="#svg-arrow-right">
              </use>
             </svg>
            </i>
           </label>
           <ul>
            <li class="toctree-l2 has-children">
             <a class="reference internal" href="../../fundamentals/document/document-api/">
              Document
             </a>
             <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox">
              <label for="toctree-checkbox-4">
               <div class="visually-hidden">
                Toggle child pages in navigation
               </div>
               <i class="icon">
                <svg>
                 <use href="#svg-arrow-right">
                 </use>
                </svg>
               </i>
              </label>
              <ul>
               <li class="toctree-l3">
                <a class="reference internal" href="../../fundamentals/document/fluent-interface/">
                 Fluent Interface
                </a>
               </li>
              </ul>
             </input>
            </li>
            <li class="toctree-l2 has-children">
             <a class="reference internal" href="../../fundamentals/document/documentarray/">
              DocumentArray
             </a>
             <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox">
              <label for="toctree-checkbox-5">
               <div class="visually-hidden">
                Toggle child pages in navigation
               </div>
               <i class="icon">
                <svg>
                 <use href="#svg-arrow-right">
                 </use>
                </svg>
               </i>
              </label>
              <ul>
               <li class="toctree-l3">
                <a class="reference internal" href="../../fundamentals/document/documentarraymemmap-api/">
                 DocumentArrayMemmap
                </a>
               </li>
              </ul>
             </input>
            </li>
           </ul>
          </input>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../fundamentals/executor/">
           Executor
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-6">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/executor/executor-api/">
             Create Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/executor/executor-built-in-features/">
             Executor Features
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/executor/executors-in-action/">
             Executor in Action
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/executor/repository-structure/">
             Executor File Structure
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../gpu-executor/">
             Run Executors on GPU
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../fundamentals/flow/">
           Flow
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-7">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/flow-api/">
             Create Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/send-recv/">
             Flow IO
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/add-exec-to-flow/">
             Add Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/topology/">
             Distributed &amp; Parallel Execution
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/async-flow/">
             Asynchronous Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/flow-as-a-service/">
             Serving Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../fundamentals/flow/remarks/">
             Remarks
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1">
          <a class="reference internal" href="../../fundamentals/clean-code/">
           Clean &amp; Efficient Code
          </a>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Data Types
         </span>
        </p>
        <ul class="current">
         <li class="toctree-l1 current has-children">
          <a class="reference internal" href="../../datatype/text/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-typography" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M6.21 8.5L4.574 3.594 2.857 8.5H6.21zm.5 1.5l.829 2.487a.75.75 0 001.423-.474L5.735 2.332a1.216 1.216 0 00-2.302-.018l-3.39 9.688a.75.75 0 001.415.496L2.332 10H6.71zm3.13-4.358C10.53 4.374 11.87 4 13 4c1.5 0 3 .939 3 2.601v5.649a.75.75 0 01-1.448.275C13.995 12.82 13.3 13 12.5 13c-.77 0-1.514-.231-2.078-.709-.577-.488-.922-1.199-.922-2.041 0-.694.265-1.411.887-1.944C11 7.78 11.88 7.5 13 7.5h1.5v-.899c0-.54-.5-1.101-1.5-1.101-.869 0-1.528.282-1.84.858a.75.75 0 11-1.32-.716zM14.5 9H13c-.881 0-1.375.22-1.637.444-.253.217-.363.5-.363.806 0 .408.155.697.39.896.249.21.63.354 1.11.354.732 0 1.26-.209 1.588-.449.35-.257.412-.495.412-.551V9z" fill-rule="evenodd">
            </path>
           </svg>
           Text
          </a>
          <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-8">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul class="current">
           <li class="toctree-l2">
            <a class="reference internal" href="../fuzzy-grep/">
             Fuzzy String Matching in 30 Lines
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/text/full-text-search/">
             Full Text Search via Feature Hashing
            </a>
           </li>
           <li class="toctree-l2 current current-page">
            <a class="current reference internal" href="#">
             Question-Answering Chatbot via Transformer
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../question-answering-bot/">
             Open-Domain Question-Answering on Long Document
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../datatype/image/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-image" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M1.75 2.5a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h.94a.76.76 0 01.03-.03l6.077-6.078a1.75 1.75 0 012.412-.06L14.5 10.31V2.75a.25.25 0 00-.25-.25H1.75zm12.5 11H4.81l5.048-5.047a.25.25 0 01.344-.009l4.298 3.889v.917a.25.25 0 01-.25.25zm1.75-.25V2.75A1.75 1.75 0 0014.25 1H1.75A1.75 1.75 0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0016 13.25zM5.5 6a.5.5 0 11-1 0 .5.5 0 011 0zM7 6a2 2 0 11-4 0 2 2 0 014 0z" fill-rule="evenodd">
            </path>
           </svg>
           Image
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-9">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/image/image2image/">
             Search Similar Images
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/image/text2image/">
             Search Image from Text via CLIP model
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/image/small-images-inside-big-images/">
             Find Small Images Inside Large Images
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../datatype/video/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-device-camera-video" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M16 3.75a.75.75 0 00-1.136-.643L11 5.425V4.75A1.75 1.75 0 009.25 3h-7.5A1.75 1.75 0 000 4.75v6.5C0 12.216.784 13 1.75 13h7.5A1.75 1.75 0 0011 11.25v-.675l3.864 2.318A.75.75 0 0016 12.25v-8.5zm-5 5.075l3.5 2.1v-5.85l-3.5 2.1v1.65zM9.5 6.75v-2a.25.25 0 00-.25-.25h-7.5a.25.25 0 00-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-4.5z" fill-rule="evenodd">
            </path>
           </svg>
           Video
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-10">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../video-qa/">
             Question-Answering on in-Video Content
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../video-search/">
             Search in-Video Visual Content via Text
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../datatype/audio/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-unmute" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M7.563 2.069A.75.75 0 018 2.75v10.5a.75.75 0 01-1.238.57L3.472 11H1.75A1.75 1.75 0 010 9.25v-2.5C0 5.784.784 5 1.75 5h1.723l3.289-2.82a.75.75 0 01.801-.111zM6.5 4.38L4.238 6.319a.75.75 0 01-.488.181h-2a.25.25 0 00-.25.25v2.5c0 .138.112.25.25.25h2a.75.75 0 01.488.18L6.5 11.62V4.38zm6.096-2.038a.75.75 0 011.06 0 8 8 0 010 11.314.75.75 0 01-1.06-1.06 6.5 6.5 0 000-9.193.75.75 0 010-1.06v-.001zm-1.06 2.121a.75.75 0 10-1.061 1.061 3.5 3.5 0 010 4.95.75.75 0 101.06 1.06 5 5 0 000-7.07l.001-.001z" fill-rule="evenodd">
            </path>
           </svg>
           Audio
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-11">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/audio/similar-audio-search/">
             Search Similar Audios
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../datatype/mesh/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-package" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M8.878.392a1.75 1.75 0 00-1.756 0l-5.25 3.045A1.75 1.75 0 001 4.951v6.098c0 .624.332 1.2.872 1.514l5.25 3.045a1.75 1.75 0 001.756 0l5.25-3.045c.54-.313.872-.89.872-1.514V4.951c0-.624-.332-1.2-.872-1.514L8.878.392zM7.875 1.69a.25.25 0 01.25 0l4.63 2.685L8 7.133 3.245 4.375l4.63-2.685zM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432L2.5 5.677zm6.25 8.271l4.625-2.683a.25.25 0 00.125-.216V5.677L8.75 8.432v5.516z" fill-rule="evenodd">
            </path>
           </svg>
           3D Mesh
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-12">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/mesh/mesh-search/">
             Search Similar 3D Meshes
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../datatype/tabular/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-table" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v3.585a.746.746 0 010 .83v8.085A1.75 1.75 0 0114.25 16H6.309a.748.748 0 01-1.118 0H1.75A1.75 1.75 0 010 14.25V6.165a.746.746 0 010-.83V1.75zM1.5 6.5v7.75c0 .138.112.25.25.25H5v-8H1.5zM5 5H1.5V1.75a.25.25 0 01.25-.25H5V5zm1.5 1.5v8h7.75a.25.25 0 00.25-.25V6.5h-8zm8-1.5h-8V1.5h7.75a.25.25 0 01.25.25V5z" fill-rule="evenodd">
            </path>
           </svg>
           Table
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-13">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../datatype/tabular/filter-via-neural-search/">
             Filter Table Rows by Attributes
            </a>
           </li>
          </ul>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Advanced
         </span>
        </p>
        <ul>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../advanced/hub/">
           Share Executors via Hub
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-14">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/hub/hub-portal/">
             Hub Portal
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/hub/create-hub-executor/">
             Create Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/hub/push-executor/">
             Publish Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/hub/use-hub-executor/">
             Use Hub Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/hub/executor-best-practices/">
             Best Practices
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../master-executor/">
             Master Executor: from Zero to Hub
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../advanced/daemon/">
           Remote Executors and Flows via JinaD
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-15">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/jinad-server/">
             JinaD Server
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/jinad-client/">
             JinaD Client
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/remote-executors/">
             Remote Executors
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/workspace/">
             Workspace
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/remote-flows/">
             Remote Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/stream-remote-logs/">
             Remote Logs
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/daemon/development-using-jinad/">
             JinaD Development Guides
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../advanced/experimental/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-beaker" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M5 5.782V2.5h-.25a.75.75 0 010-1.5h6.5a.75.75 0 010 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458L5 5.782zM9.5 2.5h-3V6a.75.75 0 01-.117.403L4.73 9h6.54L9.617 6.403A.75.75 0 019.5 6V2.5zm-6.9 9.847L3.775 10.5h8.45l1.175 1.847a.75.75 0 01-.633 1.153H3.233a.75.75 0 01-.633-1.153z" fill-rule="evenodd">
            </path>
           </svg>
           Experimental Features
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-16">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/experimental/kubernetes/">
             Jina on Kubernetes
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../advanced/experimental/indexers/">
             Indexers on Jina Hub
            </a>
           </li>
          </ul>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          API Reference
         </span>
        </p>
        <ul>
         <li class="toctree-l1">
          <a class="reference internal" href="../../cli/">
           Jina Command-Line Interface
          </a>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../proto/">
           Jina Protobuf Specification
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-17">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../proto/docs/">
             Protocol Documentation
            </a>
           </li>
          </ul>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Ecosystem
         </span>
        </p>
        <ul>
         <li class="toctree-l1">
          <a class="reference internal" href="#">
           <img class="sidebar-ecosys-logo only-light-line" src="../../_static/search-light.svg"/>
           <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/search-dark.svg"/>
           Jina
          </a>
         </li>
         <li class="toctree-l1">
          <a class="reference external" href="https://hub.jina.ai">
           <img class="sidebar-ecosys-logo only-light-line" src="../../_static/hub-light.svg"/>
           <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/hub-dark.svg"/>
           Jina Hub
          </a>
         </li>
         <li class="toctree-l1">
          <a class="reference external" href="https://finetuner.jina.ai">
           <img class="sidebar-ecosys-logo only-light-line" src="../../_static/finetuner-light.svg"/>
           <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/finetuner-dark.svg"/>
           Finetuner
          </a>
         </li>
        </ul>
       </div>
      </div>
     </div>
    </div>
   </aside>
   <div class="main">
    <div class="content">
     <article role="main">
      <div class="content-icon-container">
       <div class="theme-toggle-container theme-toggle-content">
        <button class="theme-toggle">
         <div class="visually-hidden">
          Toggle Light / Dark / Auto color theme
         </div>
         <svg class="theme-icon-when-auto">
          <use href="#svg-sun-half">
          </use>
         </svg>
         <svg class="theme-icon-when-dark">
          <use href="#svg-moon">
          </use>
         </svg>
         <svg class="theme-icon-when-light">
          <use href="#svg-sun">
          </use>
         </svg>
        </button>
       </div>
       <label class="toc-overlay-icon toc-content-icon" for="__toc">
        <div class="visually-hidden">
         Toggle table of contents sidebar
        </div>
        <i class="icon">
         <svg>
          <use href="#svg-toc">
          </use>
         </svg>
        </i>
       </label>
      </div>
      <section class="tex2jax_ignore mathjax_ignore" id="question-answering-chatbot-via-transformer">
       <h1>
        Question-Answering Chatbot via Transformer
        <a class="headerlink" href="#question-answering-chatbot-via-transformer" title="Permalink to this headline">
         ¶
        </a>
       </h1>
       <div class="sd-container-fluid sd-sphinx-override sd-p-0 sd-mt-2 sd-mb-4 docutils">
        <div class="sd-row sd-row-cols-2 sd-gx-2 sd-gy-1 docutils">
         <div class="sd-col sd-col-auto sd-d-flex-row sd-align-minor-center docutils">
          <a class="reference external image-reference" href="https://jobs.jina.ai">
           <img alt="" class="sd-avatar-sm sd-outline-muted" src="../../_images/susana.jpg"/>
          </a>
         </div>
         <div class="sd-col sd-d-flex-row sd-align-minor-center docutils">
          <div class="sd-container-fluid sd-sphinx-override docutils">
           <div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-3 sd-row-cols-md-3 sd-row-cols-lg-3 sd-gx-3 sd-gy-1 docutils">
            <div class="sd-col sd-col-auto sd-d-flex-row sd-align-minor-center docutils">
             <p class="sd-p-0 sd-m-0">
              Susana @ Jina AI
             </p>
            </div>
            <div class="sd-col sd-col-auto sd-d-flex-row sd-align-minor-center docutils">
             <p class="sd-p-0 sd-m-0">
              <span class="sd-pr-2">
               <svg aria-hidden="true" class="sd-octicon sd-octicon-calendar" height="16.0px" version="1.1" viewbox="0 0 16 16" width="16.0px">
                <path d="M4.75 0a.75.75 0 01.75.75V2h5V.75a.75.75 0 011.5 0V2h1.25c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0113.25 16H2.75A1.75 1.75 0 011 14.25V3.75C1 2.784 1.784 2 2.75 2H4V.75A.75.75 0 014.75 0zm0 3.5h8.5a.25.25 0 01.25.25V6h-11V3.75a.25.25 0 01.25-.25h2zm-2.25 4v6.75c0 .138.112.25.25.25h10.5a.25.25 0 00.25-.25V7.5h-11z" fill-rule="evenodd">
                </path>
               </svg>
              </span>
              June 15, 2021
             </p>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
       <p>
        We will use the
        <a class="reference internal" href="../../get-started/hello-world/covid-19-chatbot/#chatbot-helloworld">
         <span class="std std-ref">
          hello world chatbot
         </span>
        </a>
        for this tutorial. You can find the complete
code
        <a class="reference external" href="https://github.com/jina-ai/jina/tree/master/jina/helloworld/chatbot">
         here
        </a>
        and we will go step by step.
       </p>
       <p>
        At the end of this tutorial, you will have your own chatbot. You will use text as an input and get a text result as
output. For this example, we will use a
        <a class="reference external" href="https://www.kaggle.com/xhlulu/covidqa">
         covid dataset
        </a>
        . You will understand how
every part of this example works and how you can create new apps with different datasets on your own.
       </p>
       <section id="define-data-and-work-directories">
        <h2>
         Define data and work directories
         <a class="headerlink" href="#define-data-and-work-directories" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         We can start by creating an empty folder, I’ll call mine
         <code class="docutils literal notranslate">
          <span class="pre">
           tutorial
          </span>
         </code>
         and that’s the name you’ll see through the tutorial
but feel free to use whatever you wish.
        </p>
        <p>
         We will display our results in our browser, so download the static folder from
         <a class="reference external" href="https://github.com/jina-ai/jina/tree/master/jina/helloworld/chatbot/static">
          here
         </a>
         , and paste it into your tutorial
folder. This is only the CSS and HTML files to render our results. We will use a dataset in a
         <code class="docutils literal notranslate">
          <span class="pre">
           .csv
          </span>
         </code>
         format. We’ll use
the
         <a class="reference external" href="https://www.kaggle.com/xhlulu/covidqa">
          COVID
         </a>
         dataset from Kaggle.
        </p>
        <p>
         Download it under your
         <code class="docutils literal notranslate">
          <span class="pre">
           tutorial
          </span>
         </code>
         directory:
        </p>
        <div class="highlight-shell notranslate">
         <div class="highlight">
          <pre><span></span>wget https://static.jina.ai/chatbot/dataset.csv
</pre>
         </div>
        </div>
       </section>
       <section id="create-documents-from-a-csv-file">
        <h2>
         Create Documents from a csv file
         <a class="headerlink" href="#create-documents-from-a-csv-file" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         To create a Document in Jina, we do it like this:
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="n">doc</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="s1">'hello, world!'</span><span class="p">)</span>
</pre>
         </div>
        </div>
        <p>
         In our case, the content of our Document needs to be the dataset we want to use:
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">from</span> <span class="nn">jina.types.document.generators</span> <span class="kn">import</span> <span class="n">from_csv</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'dataset.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
    <span class="n">docs</span> <span class="o">=</span> <span class="n">from_csv</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">field_resolver</span><span class="o">=</span><span class="p">{</span><span class="s1">'question'</span><span class="p">:</span> <span class="s1">'text'</span><span class="p">})</span>
</pre>
         </div>
        </div>
        <p>
         So what happened there? We created a generator of Documents
         <code class="docutils literal notranslate">
          <span class="pre">
           docs
          </span>
         </code>
         , and we
used
         <a class="reference external" href="https://docs.jina.ai/api/jina.types.document.generators/#jina.types.document.generators.from_csv">
          from_csv
         </a>
         to
load our dataset. We use
         <code class="docutils literal notranslate">
          <span class="pre">
           field_resolver
          </span>
         </code>
         to map the text from our dataset to the Document attributes.
        </p>
        <p>
         Finally, we can combine the 2 previous steps (loading the dataset into Documents and starting the context) and index
like this:
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">from</span> <span class="nn">jina.types.document.generators</span> <span class="kn">import</span> <span class="n">from_csv</span>
<span class="k">with</span> <span class="n">flow</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'dataset.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
    <span class="n">flow</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">from_csv</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">field_resolver</span><span class="o">=</span><span class="p">{</span><span class="s1">'question'</span><span class="p">:</span> <span class="s1">'text'</span><span class="p">}))</span>
</pre>
         </div>
        </div>
        <div class="seealso admonition">
         <p class="admonition-title">
          See Also
         </p>
         <p>
          <a class="reference external" href="https://docs.jina.ai/api/jina.types.document.generators/#jina.types.document.generators.from_csv">
           from_csv
          </a>
          is a
function that belongs to the
          <a class="reference external" href="https://docs.jina.ai/api/jina.types.document.generators/">
           jina.types.document.generators module
          </a>
          .
Feel free to check it to find more generators.
         </p>
        </div>
        <div class="important admonition">
         <p class="admonition-title">
          Important
         </p>
         <p>
          <code class="docutils literal notranslate">
           <span class="pre">
            flow.index
           </span>
          </code>
          will send the data to the
          <code class="docutils literal notranslate">
           <span class="pre">
            /index
           </span>
          </code>
          endpoint. However, both of the added Executors do not have an
          <code class="docutils literal notranslate">
           <span class="pre">
            /index
           </span>
          </code>
          endpoint. In fact,
          <code class="docutils literal notranslate">
           <span class="pre">
            MyTransformer
           </span>
          </code>
          and
          <code class="docutils literal notranslate">
           <span class="pre">
            MyIndexer
           </span>
          </code>
          only expose endpoints
          <code class="docutils literal notranslate">
           <span class="pre">
            /foo
           </span>
          </code>
          and
          <code class="docutils literal notranslate">
           <span class="pre">
            /bar
           </span>
          </code>
          respectively:
         </p>
         <div class="highlight-python notranslate">
          <div class="highlight">
           <pre><span></span><span class="k">class</span> <span class="nc">MyTransformer</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
<span class="hll">    <span class="nd">@requests</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/foo'</span><span class="p">)</span>
</span>    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'foo is doing cool stuff: </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyIndexer</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
<span class="hll">    <span class="nd">@requests</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/bar'</span><span class="p">)</span>
</span>    <span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'bar is doing cool stuff: </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre>
          </div>
         </div>
         <p>
          This simply means that no endpoint will be triggered by
          <code class="docutils literal notranslate">
           <span class="pre">
            flow.index
           </span>
          </code>
          . Besides, our Executors are dummy and still do not
have logic to index data. Later, we will modify Executors so that calling
          <code class="docutils literal notranslate">
           <span class="pre">
            flow.index
           </span>
          </code>
          does indeed store the dataset.
         </p>
        </div>
       </section>
       <section id="create-flow">
        <h2>
         Create Flow
         <a class="headerlink" href="#create-flow" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         Let’s put the Executors and the Flow together and re-organize our code a little bit. First, we should import everything
we need:
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">webbrowser</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">Executor</span><span class="p">,</span> <span class="n">requests</span>
<span class="kn">from</span> <span class="nn">jina.logging.predefined</span> <span class="kn">import</span> <span class="n">default_logger</span>
<span class="kn">from</span> <span class="nn">jina.types.document.generators</span> <span class="kn">import</span> <span class="n">from_csv</span>
</pre>
         </div>
        </div>
        <p>
         Then we should have our
         <code class="docutils literal notranslate">
          <span class="pre">
           main
          </span>
         </code>
         and a
         <code class="docutils literal notranslate">
          <span class="pre">
           tutorial
          </span>
         </code>
         function that contains all the code that we’ve done so far.
         <code class="docutils literal notranslate">
          <span class="pre">
           tutorial
          </span>
         </code>
         accepts one parameter that we’ll need later:
         <code class="docutils literal notranslate">
          <span class="pre">
           port_expose
          </span>
         </code>
         (the port used to expose our Flow)
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="k">def</span> <span class="nf">tutorial</span><span class="p">(</span><span class="n">port_expose</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">MyTransformer</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
        <span class="nd">@requests</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/foo'</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'foo is doing cool stuff: </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">MyIndexer</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
        <span class="nd">@requests</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/bar'</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'bar is doing cool stuff: </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
    
    <span class="n">flow</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Flow</span><span class="p">()</span>
            <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'MyTransformer'</span><span class="p">,</span> <span class="n">uses</span><span class="o">=</span><span class="n">MyTransformer</span><span class="p">)</span>
            <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'MyIndexer'</span><span class="p">,</span> <span class="n">uses</span><span class="o">=</span><span class="n">MyIndexer</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">with</span> <span class="n">flow</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'dataset.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="n">flow</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">from_csv</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">field_resolver</span><span class="o">=</span><span class="p">{</span><span class="s1">'question'</span><span class="p">:</span> <span class="s1">'text'</span><span class="p">}))</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">tutorial</span><span class="p">(</span><span class="mi">8080</span><span class="p">)</span>
</pre>
         </div>
        </div>
        <p>
         If you run this, it should finish without errors. You won’t see much yet because we are not showing anything after we
index.
        </p>
        <p>
         To actually see something we need to specify how we will display it. For our tutorial we will do so in our browser.
After indexing, we will open a web browser to serve the static html files. We also need to configure and serve our Flow
on a specific port with the HTTP protocol so that the web browser can make requests to the Flow. So, we’ll use the
parameter
         <code class="docutils literal notranslate">
          <span class="pre">
           port_expose
          </span>
         </code>
         to configure the Flow and set the protocol to HTTP. Modify the function
         <code class="docutils literal notranslate">
          <span class="pre">
           tutorial
          </span>
         </code>
         like so:
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="k">def</span> <span class="nf">tutorial</span><span class="p">(</span><span class="n">port_expose</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">MyTransformer</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
        <span class="nd">@requests</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/foo'</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'foo is doing cool stuff: </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
    
    <span class="k">class</span> <span class="nc">MyIndexer</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
        <span class="nd">@requests</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/bar'</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'bar is doing cool stuff: </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
    
    <span class="n">flow</span> <span class="o">=</span> <span class="p">(</span>
<span class="hll">        <span class="n">Flow</span><span class="p">(</span><span class="n">cors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span>            <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'MyTransformer'</span><span class="p">,</span> <span class="n">uses</span><span class="o">=</span><span class="n">MyTransformer</span><span class="p">)</span>
            <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'MyIndexer'</span><span class="p">,</span> <span class="n">uses</span><span class="o">=</span><span class="n">MyIndexer</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">with</span> <span class="n">flow</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'dataset.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="n">flow</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">from_csv</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">field_resolver</span><span class="o">=</span><span class="p">{</span><span class="s1">'question'</span><span class="p">:</span> <span class="s1">'text'</span><span class="p">}))</span>
    
        <span class="c1"># switches the serving protocol to HTTP at runtime</span>
<span class="hll">        <span class="n">flow</span><span class="o">.</span><span class="n">protocol</span> <span class="o">=</span> <span class="s1">'http'</span>
</span><span class="hll">        <span class="n">flow</span><span class="o">.</span><span class="n">port_expose</span> <span class="o">=</span> <span class="n">port_expose</span>
</span><span class="hll">        <span class="n">url_html_path</span> <span class="o">=</span> <span class="s1">'file://'</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span>
</span><span class="hll">            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span class="hll">                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s1">'static/index.html'</span>
</span><span class="hll">            <span class="p">)</span>
</span><span class="hll">        <span class="p">)</span>
</span><span class="hll">        <span class="k">try</span><span class="p">:</span>
</span><span class="hll">            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url_html_path</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span class="hll">        <span class="k">except</span><span class="p">:</span>
</span><span class="hll">            <span class="k">pass</span>  <span class="c1"># intentional pass, browser support isn't cross-platform</span>
</span><span class="hll">        <span class="k">finally</span><span class="p">:</span>
</span><span class="hll">            <span class="n">default_logger</span><span class="o">.</span><span class="n">success</span><span class="p">(</span>
</span><span class="hll">                <span class="sa">f</span><span class="s1">'You should see a demo page opened in your browser, '</span>
</span><span class="hll">                <span class="sa">f</span><span class="s1">'if not, you may open </span><span class="si">{</span><span class="n">url_html_path</span><span class="si">}</span><span class="s1"> manually'</span>
</span><span class="hll">            <span class="p">)</span>
</span><span class="hll">        <span class="n">flow</span><span class="o">.</span><span class="n">block</span><span class="p">()</span>
</span></pre>
         </div>
        </div>
        <div class="seealso admonition">
         <p class="admonition-title">
          See Also
         </p>
         <p>
          For more information on what the Flow is doing, and how to serve the Flow with
          <code class="docutils literal notranslate">
           <span class="pre">
            f.block()
           </span>
          </code>
          and configure the protocol,
check
          <a class="reference internal" href="../../fundamentals/flow/#flow-cookbook">
           <span class="std std-ref">
            the Flow fundamentals section
           </span>
          </a>
          .
         </p>
        </div>
        <div class="important admonition">
         <p class="admonition-title">
          Important
         </p>
         <p>
          Since we want to call our Flow from the browser, it’s important to enable
          <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">
           Cross-Origin Resource Sharing
          </a>
          with
          <code class="docutils literal notranslate">
           <span class="pre">
            Flow(cors=True)
           </span>
          </code>
         </p>
        </div>
        <p>
         Ok, so it seems that we have plenty of work done already. If you run this you will see a new tab open in your browser,
and there you will have a text box ready for you to input some text. However, if you try to enter anything you won’t get
any results. This is because we are using dummy Executors. Our
         <code class="docutils literal notranslate">
          <span class="pre">
           MyTransformer
          </span>
         </code>
         and
         <code class="docutils literal notranslate">
          <span class="pre">
           MyIndexer
          </span>
         </code>
         aren’t actually doing
anything. So far they only print a line when they are called. So we need real Executors.
        </p>
       </section>
       <section id="create-executors">
        <h2>
         Create Executors
         <a class="headerlink" href="#create-executors" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         We will be creating our Executors in a separate file:
         <code class="docutils literal notranslate">
          <span class="pre">
           my_executors.py
          </span>
         </code>
         .
        </p>
        <section id="sentence-transformer">
         <h3>
          Sentence Transformer
          <a class="headerlink" href="#sentence-transformer" title="Permalink to this headline">
           ¶
          </a>
         </h3>
         <p>
          First, let’s import the following:
         </p>
         <div class="highlight-python notranslate">
          <div class="highlight">
           <pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>

<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Executor</span><span class="p">,</span> <span class="n">DocumentArray</span><span class="p">,</span> <span class="n">requests</span>
<span class="kn">from</span> <span class="nn">jina.types.arrays.memmap</span> <span class="kn">import</span> <span class="n">DocumentArrayMemmap</span>
<span class="kn">from</span> <span class="nn">sentence_transformers</span> <span class="kn">import</span> <span class="n">SentenceTransformer</span>
</pre>
          </div>
         </div>
         <p>
          Now, let’s implement
          <code class="docutils literal notranslate">
           <span class="pre">
            MyTransformer
           </span>
          </code>
          :
         </p>
         <div class="highlight-python notranslate">
          <div class="highlight">
           <pre><span></span><span class="k">class</span> <span class="nc">MyTransformer</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
    <span class="sd">"""Transformer executor class """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">pretrained_model_name_or_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">'paraphrase-mpnet-base-v2'</span><span class="p">,</span>
            <span class="n">device</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">'cpu'</span><span class="p">,</span>
            <span class="o">*</span><span class="n">args</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">SentenceTransformer</span><span class="p">(</span><span class="n">pretrained_model_name_or_path</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>

    <span class="nd">@requests</span>
    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docs</span><span class="p">:</span> <span class="s1">'DocumentArray'</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">torch</span>

        <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
            <span class="n">texts</span> <span class="o">=</span> <span class="n">docs</span><span class="o">.</span><span class="n">get_attributes</span><span class="p">(</span><span class="s2">"text"</span><span class="p">)</span>
            <span class="n">embeddings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">texts</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">doc</span><span class="p">,</span> <span class="n">embedding</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">embeddings</span><span class="p">):</span>
                <span class="n">doc</span><span class="o">.</span><span class="n">embedding</span> <span class="o">=</span> <span class="n">embedding</span>
</pre>
          </div>
         </div>
         <p>
          <code class="docutils literal notranslate">
           <span class="pre">
            MyTransformer
           </span>
          </code>
          exposes only one endpoint:
          <code class="docutils literal notranslate">
           <span class="pre">
            encode
           </span>
          </code>
          . This will be called whenever we make a request to the Flow, either
on query or index. The endpoint will create embeddings for the indexed or query Documents so that they can be used to
get the closed matches.
         </p>
         <div class="note admonition">
          <p class="admonition-title">
           Note
          </p>
          <p>
           Encoding is a fundamental concept in neural search. It means representing the data in a vectorial form (embeddings).
          </p>
         </div>
         <p>
          Encoding is performed through a sentence-transformers model (
          <code class="docutils literal notranslate">
           <span class="pre">
            paraphrase-mpnet-base-v2
           </span>
          </code>
          by default). We get the text
attributes of docs in batch and then compute embeddings. Later, we set the embedding attribute of each Document.
         </p>
        </section>
        <section id="simple-indexer">
         <h3>
          Simple Indexer
          <a class="headerlink" href="#simple-indexer" title="Permalink to this headline">
           ¶
          </a>
         </h3>
         <p>
          Now, let’s implement our indexer (
          <code class="docutils literal notranslate">
           <span class="pre">
            MyIndexer
           </span>
          </code>
          ):
         </p>
         <div class="highlight-python notranslate">
          <div class="highlight">
           <pre><span></span><span class="k">class</span> <span class="nc">MyIndexer</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
    <span class="sd">"""Simple indexer class """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_docs</span> <span class="o">=</span> <span class="n">DocumentArrayMemmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workspace</span> <span class="o">+</span> <span class="s1">'/indexer'</span><span class="p">)</span>

    <span class="nd">@requests</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/index'</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docs</span><span class="p">:</span> <span class="s1">'DocumentArray'</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_docs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>

    <span class="nd">@requests</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/search'</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docs</span><span class="p">:</span> <span class="s1">'DocumentArray'</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Append best matches to each document in docs</span>

<span class="sd">        :param docs: documents that are searched</span>
<span class="sd">        :param kwargs: other keyword arguments</span>
<span class="sd">        """</span>
        <span class="n">docs</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_docs</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">'cosine'</span><span class="p">,</span> <span class="n">normalization</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre>
          </div>
         </div>
         <p>
          <code class="docutils literal notranslate">
           <span class="pre">
            MyIndexer
           </span>
          </code>
          exposes 2 endpoints:
          <code class="docutils literal notranslate">
           <span class="pre">
            index
           </span>
          </code>
          and
          <code class="docutils literal notranslate">
           <span class="pre">
            search
           </span>
          </code>
          . To perform indexing, we use
          <a class="reference external" href="https://docs.jina.ai/api/jina.types.arrays.memmap/#jina.types.arrays.memmap.DocumentArrayMemmap">
           <code class="docutils literal notranslate">
            <span class="pre">
             DocumentArrayMemmap
            </span>
           </code>
          </a>
          which is a Jina data type. Indexing is a simple as adding the Documents to the
          <code class="docutils literal notranslate">
           <span class="pre">
            DocumentArrayMemmap
           </span>
          </code>
          .
         </p>
         <div class="seealso admonition">
          <p class="admonition-title">
           See Also
          </p>
          <p>
           Learn more about
           <a class="reference internal" href="../../fundamentals/document/documentarraymemmap-api/#documentarraymemmap-api">
            <span class="std std-ref">
             DocumentArrayMemmap
            </span>
           </a>
           .
          </p>
         </div>
         <p>
          To perform the search operation, we use the method
          <code class="docutils literal notranslate">
           <span class="pre">
            match
           </span>
          </code>
          which will return the top match for the query Documents using
the cosine similarity.
         </p>
         <div class="seealso admonition">
          <p class="admonition-title">
           See Also
          </p>
          <p>
           <code class="docutils literal notranslate">
            <span class="pre">
             .match
            </span>
           </code>
           is a method of both
           <code class="docutils literal notranslate">
            <span class="pre">
             DocumentArray
            </span>
           </code>
           and
           <code class="docutils literal notranslate">
            <span class="pre">
             DocumentArrayMemmap
            </span>
           </code>
           . Learn more about it
           <a class="reference internal" href="../../fundamentals/document/documentarray/#match-documentarray">
            <span class="std std-ref">
             in this section
            </span>
           </a>
           .
          </p>
         </div>
         <p>
          To import the Executors, just add this to the imports:
         </p>
         <div class="highlight-python notranslate">
          <div class="highlight">
           <pre><span></span><span class="kn">from</span> <span class="nn">my_executors</span> <span class="kn">import</span> <span class="n">MyTransformer</span><span class="p">,</span> <span class="n">MyIndexer</span>
</pre>
          </div>
         </div>
        </section>
       </section>
       <section id="put-all-together">
        <h2>
         Put all together
         <a class="headerlink" href="#put-all-together" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         Your
         <code class="docutils literal notranslate">
          <span class="pre">
           app.py
          </span>
         </code>
         should now look like this:
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">webbrowser</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">Executor</span>
<span class="kn">from</span> <span class="nn">jina.logging.predefined</span> <span class="kn">import</span> <span class="n">default_logger</span>
<span class="kn">from</span> <span class="nn">jina.types.document.generators</span> <span class="kn">import</span> <span class="n">from_csv</span>
<span class="kn">from</span> <span class="nn">my_executors</span> <span class="kn">import</span> <span class="n">MyTransformer</span><span class="p">,</span> <span class="n">MyIndexer</span>


<span class="k">def</span> <span class="nf">tutorial</span><span class="p">(</span><span class="n">port_expose</span><span class="p">):</span>
    <span class="n">flow</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Flow</span><span class="p">(</span><span class="n">cors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'MyTransformer'</span><span class="p">,</span> <span class="n">uses</span><span class="o">=</span><span class="n">MyTransformer</span><span class="p">)</span>
            <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'MyIndexer'</span><span class="p">,</span> <span class="n">uses</span><span class="o">=</span><span class="n">MyIndexer</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">with</span> <span class="n">flow</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'dataset.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="n">flow</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">from_csv</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">field_resolver</span><span class="o">=</span><span class="p">{</span><span class="s1">'question'</span><span class="p">:</span> <span class="s1">'text'</span><span class="p">}))</span>

        <span class="c1"># switch to REST gateway at runtime</span>
        <span class="n">flow</span><span class="o">.</span><span class="n">protocol</span> <span class="o">=</span> <span class="s1">'http'</span>
        <span class="n">flow</span><span class="o">.</span><span class="n">port_expose</span> <span class="o">=</span> <span class="n">port_expose</span>
        <span class="n">url_html_path</span> <span class="o">=</span> <span class="s1">'file://'</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s1">'static/index.html'</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url_html_path</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># intentional pass, browser support isn't cross-platform</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">default_logger</span><span class="o">.</span><span class="n">success</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">'You should see a demo page opened in your browser, '</span>
                <span class="sa">f</span><span class="s1">'if not, you may open </span><span class="si">{</span><span class="n">url_html_path</span><span class="si">}</span><span class="s1"> manually'</span>
            <span class="p">)</span>
        <span class="n">flow</span><span class="o">.</span><span class="n">block</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">tutorial</span><span class="p">(</span><span class="mi">8080</span><span class="p">)</span>
</pre>
         </div>
        </div>
        <p>
         And your directory should be:
        </p>
        <div class="highlight-none notranslate">
         <div class="highlight">
          <pre><span></span>.
└── tutorial                    
    ├── app.py          
    ├── my_executors.py         
    ├── static/         
    ├── our_flow.svg #This will be here if you used the .plot() function       
    └── dataset.csv
</pre>
         </div>
        </div>
        <p>
         And we are done! If you followed all the steps, now you should have something like this in your browser:
        </p>
        <figure class="align-center">
         <img alt="../../_images/results.png" src="../../_images/results.png">
         </img>
        </figure>
       </section>
      </section>
     </article>
     <footer>
      <div class="related-pages">
       <a class="next-page" href="../question-answering-bot/">
        <div class="page-info">
         <div class="context">
          <span>
           Next
          </span>
         </div>
         <div class="title">
          Open-Domain Question-Answering on Long Document
         </div>
        </div>
        <svg>
         <use href="#svg-arrow-right">
         </use>
        </svg>
       </a>
       <a class="prev-page" href="../../datatype/text/full-text-search/">
        <svg>
         <use href="#svg-arrow-right">
         </use>
        </svg>
        <div class="page-info">
         <div class="context">
          <span>
           Previous
          </span>
         </div>
         <div class="title">
          Full Text Search via Feature Hashing
         </div>
        </div>
       </a>
      </div>
      <div class="related-information sd-d-inline-flex">
       <a href="https://jina.ai">
        Copyright © Jina AI Limited. All rights reserved.
       </a>
       Last updated on Nov 30, 2021.
       <div class="social-btns">
        <a aria-label="GitHub" class="social-btn" href="https://github.com/jina-ai/jina/" rel="noreferrer" target="_blank">
         <i class="fab fa-github">
         </i>
        </a>
        <a aria-label="Slack" class="social-btn" href="https://slack.jina.ai" rel="noreferrer" target="_blank">
         <i class="fab fa-slack">
         </i>
        </a>
        <a aria-label="YouTube" class="social-btn" href="https://youtube.com/c/jina-ai" rel="noreferrer" target="_blank">
         <i class="fab fa-youtube">
         </i>
        </a>
        <a aria-label="Twitter" class="social-btn" href="https://twitter.com/JinaAI_" rel="noreferrer" target="_blank">
         <i class="fab fa-twitter">
         </i>
        </a>
        <a aria-label="LinkedIn" class="social-btn" href="https://www.linkedin.com/company/jinaai/" rel="noreferrer" target="_blank">
         <i class="fab fa-linkedin">
         </i>
        </a>
       </div>
      </div>
     </footer>
    </div>
    <aside class="toc-drawer" id="toc-drawer">
     <div class="toc-sticky toc-scroll">
      <div class="toc-title-container">
       <span class="toc-title">
        Contents
       </span>
      </div>
      <div class="toc-tree-container">
       <div class="toc-tree">
        <ul>
         <li>
          <a class="reference internal" href="#">
           Question-Answering Chatbot via Transformer
          </a>
          <ul>
           <li>
            <a class="reference internal" href="#define-data-and-work-directories">
             Define data and work directories
            </a>
           </li>
           <li>
            <a class="reference internal" href="#create-documents-from-a-csv-file">
             Create Documents from a csv file
            </a>
           </li>
           <li>
            <a class="reference internal" href="#create-flow">
             Create Flow
            </a>
           </li>
           <li>
            <a class="reference internal" href="#create-executors">
             Create Executors
            </a>
            <ul>
             <li>
              <a class="reference internal" href="#sentence-transformer">
               Sentence Transformer
              </a>
             </li>
             <li>
              <a class="reference internal" href="#simple-indexer">
               Simple Indexer
              </a>
             </li>
            </ul>
           </li>
           <li>
            <a class="reference internal" href="#put-all-together">
             Put all together
            </a>
           </li>
          </ul>
         </li>
        </ul>
       </div>
      </div>
      <details class="jina-doc-bot sd-sphinx-override sd-dropdown sd-card" id="jina-docbot" v-bind:class="{ready: ready}">
       <summary class="sd-summary-title sd-card-header">
        <svg aria-hidden="true" class="sd-octicon sd-octicon-comment-discussion" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
         <path d="M1.5 2.75a.25.25 0 01.25-.25h8.5a.25.25 0 01.25.25v5.5a.25.25 0 01-.25.25h-3.5a.75.75 0 00-.53.22L3.5 11.44V9.25a.75.75 0 00-.75-.75h-1a.25.25 0 01-.25-.25v-5.5zM1.75 1A1.75 1.75 0 000 2.75v5.5C0 9.216.784 10 1.75 10H2v1.543a1.457 1.457 0 002.487 1.03L7.061 10h3.189A1.75 1.75 0 0012 8.25v-5.5A1.75 1.75 0 0010.25 1h-8.5zM14.5 4.75a.25.25 0 00-.25-.25h-.5a.75.75 0 110-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0114.25 12H14v1.543a1.457 1.457 0 01-2.487 1.03L9.22 12.28a.75.75 0 111.06-1.06l2.22 2.22v-2.19a.75.75 0 01.75-.75h1a.25.25 0 00.25-.25v-5.5z" fill-rule="evenodd">
         </path>
        </svg>
        Ask our docs!
        <div class="sd-summary-down docutils">
         <svg aria-hidden="true" class="sd-octicon sd-octicon-chevron-down" height="1.5em" version="1.1" viewbox="0 0 24 24" width="1.5em">
          <path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd">
          </path>
         </svg>
        </div>
        <div class="sd-summary-up docutils">
         <svg aria-hidden="true" class="sd-octicon sd-octicon-chevron-up" height="1.5em" version="1.1" viewbox="0 0 24 24" width="1.5em">
          <path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd">
          </path>
         </svg>
        </div>
       </summary>
       <div class="sd-summary-content docutils">
        <div class="jina-doc-answer">
         <div class="jina-doc-answer-hint" v-if="qa_pairs.length===0">
          <p class="jina-doc-bot-help-text sd-font-weight-bold" v-if="!ready">
           Chat loading...
           <br/>
           <br/>
           You can think of questions while our bot load. Try:
          </p>
          <p class="jina-doc-bot-help-text sd-font-weight-bold hidden-before-ready" v-else="">
           You can ask questions about our docs. Try:
          </p>
          <ul class="example-question simple sd-font-weight-light">
           <li>
            <p>
             Does Jina support Kubernetes?
            </p>
           </li>
           <li>
            <p>
             How can I traverse a nested DocumentArray?
            </p>
           </li>
           <li>
            <p>
             What are the basic concepts in Jina?
            </p>
           </li>
          </ul>
         </div>
         <div class="jina-doc-answer-dialog hidden-before-ready" v-else="">
          <div class="qa-container" v-for="qa in qa_pairs">
           <div class="sd-text-right" v-if="qa.question">
            <div class="talk-bubble question-bubble">
             <div class="talktext">
              <p>
               ${qa.question}
              </p>
             </div>
            </div>
           </div>
           <div class="talk-bubble answer-bubble">
            <div class="talktext">
             <p v-if="qa.answer">
              ${qa.answer.text}
             </p>
             <div v-else="">
              <svg class="loader" height="10" width="40">
               <circle class="dot" cx="10" cy="5" r="3">
               </circle>
               <circle class="dot" cx="20" cy="5" r="3">
               </circle>
               <circle class="dot" cx="30" cy="5" r="3">
               </circle>
              </svg>
             </div>
            </div>
            <a class="answer-reference" href="https://slack.jina.ai" target="_blank" v-if="qa.answer &amp;&amp; is_conn_broken">
             Report
            </a>
            <div class="feedback-tooltip sd-d-flex-row" v-if="qa.answer &amp;&amp; !is_conn_broken &amp;&amp; qa.answer.uri">
             <a :href="root_url + qa.answer.uri" class="answer-reference">
              Source
             </a>
             <div class="sd-d-flex-row">
              <div class="thumb-answer thumbup" style="margin: 0 6px" v-on:click="submit_rating(qa, true)" v-show="qa.rating===null">
               <svg aria-hidden="true" class="sd-octicon sd-octicon-thumbsup" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
                <path d="M8.834.066C7.494-.087 6.5 1.048 6.5 2.25v.5c0 1.329-.647 2.124-1.318 2.614-.328.24-.66.403-.918.508A1.75 1.75 0 002.75 5h-1A1.75 1.75 0 000 6.75v7.5C0 15.216.784 16 1.75 16h1a1.75 1.75 0 001.662-1.201c.525.075 1.067.229 1.725.415.152.043.31.088.475.133 1.154.32 2.54.653 4.388.653 1.706 0 2.97-.153 3.722-1.14.353-.463.537-1.042.668-1.672.118-.56.208-1.243.313-2.033l.04-.306c.25-1.869.265-3.318-.188-4.316a2.418 2.418 0 00-1.137-1.2C13.924 5.085 13.353 5 12.75 5h-1.422l.015-.113c.07-.518.157-1.17.157-1.637 0-.922-.151-1.719-.656-2.3-.51-.589-1.247-.797-2.01-.884zM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.922.922 0 00-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.861 5.861 0 01-1.567.81V13.3zM2.75 6.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-1a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25h1z" fill-rule="evenodd">
                </path>
               </svg>
              </div>
              <div class="thumb-answer thumbdown" v-on:click="submit_rating(qa, false)" v-show="qa.rating===null">
               <svg aria-hidden="true" class="sd-octicon sd-octicon-thumbsdown" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
                <path d="M7.083 15.986c1.34.153 2.334-.982 2.334-2.183v-.5c0-1.329.646-2.123 1.317-2.614.329-.24.66-.403.919-.508a1.75 1.75 0 001.514.872h1a1.75 1.75 0 001.75-1.75v-7.5a1.75 1.75 0 00-1.75-1.75h-1a1.75 1.75 0 00-1.662 1.2c-.525-.074-1.068-.228-1.726-.415L9.305.705C8.151.385 6.765.053 4.917.053c-1.706 0-2.97.152-3.722 1.139-.353.463-.537 1.042-.669 1.672C.41 3.424.32 4.108.214 4.897l-.04.306c-.25 1.869-.266 3.318.188 4.316.244.537.622.943 1.136 1.2.495.248 1.066.334 1.669.334h1.422l-.015.112c-.07.518-.157 1.17-.157 1.638 0 .921.151 1.718.655 2.299.512.589 1.248.797 2.011.884zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479a63.914 63.914 0 00-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.921.921 0 00.443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.862 5.862 0 011.568-.809V2.754zm1.75 6.798a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25h1a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-1z" fill-rule="evenodd">
                </path>
               </svg>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="jina-doc-bot-controls sd-d-flex-row sd-border-1">
         <textarea :disabled="!ready" :placeholder="'Type your question here'" :readonly="is_busy" autofocus="" class="sd-border-0" disabled="" id="bot-input-question" maxlength="100" placeholder="Just a moment, please ..." rows="3" style="width: 100%" v-model="cur_question" v-on:keyup.enter="submit_q"></textarea>
         <button class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-outline-primary sd-rounded-0 hidden-before-ready" id="bot-input-btn" v-on:click="submit_q" v-show="cur_question.length&gt;0 &amp;&amp; !is_busy">
          <svg aria-hidden="true" class="sd-octicon sd-octicon-paper-airplane" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
           <path d="M1.592 2.712L2.38 7.25h4.87a.75.75 0 110 1.5H2.38l-.788 4.538L13.929 8 1.592 2.712zM.989 8L.064 2.68a1.341 1.341 0 011.85-1.462l13.402 5.744a1.13 1.13 0 010 2.076L1.913 14.782a1.341 1.341 0 01-1.85-1.463L.99 8z" fill-rule="evenodd">
           </path>
          </svg>
         </button>
        </div>
        <div class="powered-by">
        </div>
       </div>
      </details>
     </div>
    </aside>
   </div>
  </div>
  <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js">
  </script>
  <script src="../../_static/jquery.js">
  </script>
  <script src="../../_static/underscore.js">
  </script>
  <script src="../../_static/doctools.js">
  </script>
  <script src="../../_static/scripts/main.js">
  </script>
  <script src="../../_static/clipboard.min.js">
  </script>
  <script src="../../_static/copybutton.js">
  </script>
  <script src="../../_static/tabs.js">
  </script>
  <script src="../../_static/design-tabs.js">
  </script>
  <script>
   var server_address = 'https://docsbot.jina.ai';
  </script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js">
  </script>
  <script src="../../_static/docbot.js">
  </script>
  <script src="../../_static/iframe.js">
  </script>
 </body>
</html>