<!DOCTYPE html>
<html class="no-js" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="light dark" name="color-scheme"/>
  <meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
  <meta content="Distributed &amp; Parallel Execution" property="og:title"/>
  <meta content="website" property="og:type">
   <meta content="https://docs.jina.ai/fundamentals/flow/topology.html" property="og:url"/>
   <meta content="Jina 2.5.1 Documentation" property="og:site_name"/>
   <meta content="The topology of a Flow defines how information is distributed between all Executors. Each Executor has predecessors and successors. An Executor receives requests from all of its predecessors and sends them to all of its successors. Additionally, an Executor can be split into Shards and Replicas. ..." property="og:description"/>
   <meta content="https://docs.jina.ai/_static/banner.png" property="og:image"/>
   <meta content="Jina 2.5.1 Documentation" property="og:image:alt"/>
   <meta content="summary_large_image" name="twitter:card"/>
   <meta content="@JinaAI_" name="twitter:site"/>
   <meta content="@JinaAI_" name="twitter:creator"/>
   <meta content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning" name="description"/>
   <meta content="Jina is the cloud-native neural search solution powered by the state-of-the-art AI and deep learning" property="og:description"/>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-48ZDWC8GT6">
   </script>
   <script>
    window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-48ZDWC8GT6');
   </script>
   <script async="" defer="" src="https://buttons.github.io/buttons.js">
   </script>
   <link href="../../../genindex/" rel="index" title="Index"/>
   <link href="../../../search/" rel="search" title="Search"/>
   <link href="../async-flow/" rel="next" title="Asynchronous Flow"/>
   <link href="../add-exec-to-flow/" rel="prev" title="Add Executor"/>
   <link href="../../../_static/favicon.ico" rel="shortcut icon"/>
   <meta content="sphinx-4.3.1, furo 2021.10.09" name="generator"/>
   <title>
    Distributed &amp; Parallel Execution - Jina 2.5.1 documentation
   </title>
   <link href="../../../_static/pygments.css" rel="stylesheet" type="text/css"/>
   <link href="../../../_static/styles/furo.css?digest=0254c309f5cadf746f1a613e7677379ac9c8cdcd" rel="stylesheet" type="text/css"/>
   <link href="../../../_static/copybutton.css" rel="stylesheet" type="text/css"/>
   <link href="../../../_static/tabs.css" rel="stylesheet" type="text/css"/>
   <link href="../../../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" rel="stylesheet" type="text/css"/>
   <link href="../../../_static/styles/furo-extensions.css?digest=16fb25fabf47304eee183a5e9af80b1ba98259b1" rel="stylesheet" type="text/css"/>
   <link href="../../../_static/main.css" rel="stylesheet" type="text/css"/>
   <link href="../../../_static/docbot.css" rel="stylesheet" type="text/css"/>
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" rel="stylesheet" type="text/css"/>
   <style>
    body {
    --color-code-background: #ffffff;
  --color-code-foreground: #4d4d4d;
  --color-brand-primary: #009191;
  --color-brand-content: #009191;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
    }
  }
   </style>
  </meta>
 </head>
 <body>
  <script>
   document.body.dataset.theme = localStorage.getItem("theme") || "auto";
  </script>
  <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
   <symbol id="svg-toc" viewbox="0 0 24 24">
    <title>
     Contents
    </title>
    <svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <path d="M0 0h24v24H0z" stroke="none">
     </path>
     <line x1="4" x2="20" y1="6" y2="6">
     </line>
     <line x1="10" x2="20" y1="12" y2="12">
     </line>
     <line x1="6" x2="20" y1="18" y2="18">
     </line>
    </svg>
   </symbol>
   <symbol id="svg-menu" viewbox="0 0 24 24">
    <title>
     Menu
    </title>
    <svg class="feather-menu" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <line x1="3" x2="21" y1="12" y2="12">
     </line>
     <line x1="3" x2="21" y1="6" y2="6">
     </line>
     <line x1="3" x2="21" y1="18" y2="18">
     </line>
    </svg>
   </symbol>
   <symbol id="svg-arrow-right" viewbox="0 0 24 24">
    <title>
     Expand
    </title>
    <svg class="feather-chevron-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <polyline points="9 18 15 12 9 6">
     </polyline>
    </svg>
   </symbol>
   <symbol id="svg-sun" viewbox="0 0 24 24">
    <title>
     Light mode
    </title>
    <svg class="feather-sun" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <circle cx="12" cy="12" r="5">
     </circle>
     <line x1="12" x2="12" y1="1" y2="3">
     </line>
     <line x1="12" x2="12" y1="21" y2="23">
     </line>
     <line x1="4.22" x2="5.64" y1="4.22" y2="5.64">
     </line>
     <line x1="18.36" x2="19.78" y1="18.36" y2="19.78">
     </line>
     <line x1="1" x2="3" y1="12" y2="12">
     </line>
     <line x1="21" x2="23" y1="12" y2="12">
     </line>
     <line x1="4.22" x2="5.64" y1="19.78" y2="18.36">
     </line>
     <line x1="18.36" x2="19.78" y1="5.64" y2="4.22">
     </line>
    </svg>
   </symbol>
   <symbol id="svg-moon" viewbox="0 0 24 24">
    <title>
     Dark mode
    </title>
    <svg class="icon-tabler-moon" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <path d="M0 0h24v24H0z" fill="none" stroke="none">
     </path>
     <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z">
     </path>
    </svg>
   </symbol>
   <symbol id="svg-sun-half" viewbox="0 0 24 24">
    <title>
     Auto light/dark mode
    </title>
    <svg class="icon-tabler-shadow" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
     <path d="M0 0h24v24H0z" fill="none" stroke="none">
     </path>
     <circle cx="12" cy="12" r="9">
     </circle>
     <path d="M13 12h5">
     </path>
     <path d="M13 15h4">
     </path>
     <path d="M13 18h1">
     </path>
     <path d="M13 9h4">
     </path>
     <path d="M13 6h1">
     </path>
    </svg>
   </symbol>
  </svg>
  <input class="sidebar-toggle" id="__navigation" name="__navigation" type="checkbox"/>
  <input class="sidebar-toggle" id="__toc" name="__toc" type="checkbox"/>
  <label class="overlay sidebar-overlay" for="__navigation">
   <div class="visually-hidden">
    Hide navigation sidebar
   </div>
  </label>
  <label class="overlay toc-overlay" for="__toc">
   <div class="visually-hidden">
    Hide table of contents sidebar
   </div>
  </label>
  <div class="page">
   <header class="mobile-header" id="mobile-header">
    <div class="header-left">
     <label class="nav-overlay-icon" for="__navigation">
      <div class="visually-hidden">
       Toggle site navigation sidebar
      </div>
      <i class="icon">
       <svg>
        <use href="#svg-menu">
        </use>
       </svg>
      </i>
     </label>
    </div>
    <div class="header-center">
     <a href="../../../">
      <div class="brand">
       Jina 2.5.1 documentation
      </div>
     </a>
    </div>
    <div class="header-right">
     <div class="theme-toggle-container theme-toggle-header">
      <button class="theme-toggle">
       <div class="visually-hidden">
        Toggle Light / Dark / Auto color theme
       </div>
       <svg class="theme-icon-when-auto">
        <use href="#svg-sun-half">
        </use>
       </svg>
       <svg class="theme-icon-when-dark">
        <use href="#svg-moon">
        </use>
       </svg>
       <svg class="theme-icon-when-light">
        <use href="#svg-sun">
        </use>
       </svg>
      </button>
     </div>
     <label class="toc-overlay-icon toc-header-icon" for="__toc">
      <div class="visually-hidden">
       Toggle table of contents sidebar
      </div>
      <i class="icon">
       <svg>
        <use href="#svg-toc">
        </use>
       </svg>
      </i>
     </label>
    </div>
   </header>
   <aside class="sidebar-drawer" id="sidebar-drawer">
    <div class="sidebar-container">
     <div class="sidebar-sticky">
      <a class="sidebar-brand" href="../../../">
       <div class="sidebar-logo-container">
        <img alt="Light Logo" class="sidebar-logo only-light" src="../../../_static/logo-light.svg"/>
        <img alt="Dark Logo" class="sidebar-logo only-dark" src="../../../_static/logo-dark.svg"/>
       </div>
      </a>
      <div class="sd-d-flex-row sd-align-major-spaced">
       <a aria-label="Star jina-ai/jina on GitHub" class="github-button" data-icon="octicon-star" data-show-count="true" href="https://github.com/jina-ai/jina" style="opacity: 0;">
        Star
       </a>
       <select class="version-select" onchange="window.location.href=this.value">
        <option selected="selected" value="master/fundamentals/flow/topology/">
         master
        </option>        <option value="../../../../fundamentals/flow/topology/">
         latest(v2.5.0)
        </option>        <option value="../../../../v2.4.10/fundamentals/flow/topology/">
         v2.4.10
        </option>        <option value="../../../../v2.4.9/fundamentals/flow/topology/">
         v2.4.9
        </option>
       </select>
      </div>
      <form action="../../../search/" class="sidebar-search-container" method="get" role="search">
       <input aria-label="Search" class="sidebar-search" name="q" placeholder="Search"/>
       <input name="check_keywords" type="hidden" value="yes"/>
       <input name="area" type="hidden" value="default"/>
      </form>
      <div id="searchbox">
      </div>
      <div class="sidebar-scroll">
       <div class="sidebar-tree">
        <p class="caption" role="heading">
         <span class="caption-text">
          Get started
         </span>
        </p>
        <ul>
         <li class="toctree-l1">
          <a class="reference internal" href="../../../get-started/neural-search/">
           What is Neural Search?
          </a>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../get-started/install/">
           Install
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-1">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/experimental/windows/">
             Jina on Windows
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../get-started/install/troubleshooting/">
             Troubleshooting
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../get-started/hello-world/">
           Run Quick Demos
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-2">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../get-started/hello-world/fashion/">
             Fashion image search
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../get-started/hello-world/covid-19-chatbot/">
             Covid-19 chatbot
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../get-started/hello-world/multimodal/">
             Multimodal search
            </a>
           </li>
          </ul>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Fundamentals
         </span>
        </p>
        <ul class="current">
         <li class="toctree-l1">
          <a class="reference internal" href="../../concepts/">
           Basic Concepts
          </a>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../document/">
           Document
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-3">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2 has-children">
            <a class="reference internal" href="../../document/document-api/">
             Document
            </a>
            <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/>
            <label for="toctree-checkbox-4">
             <div class="visually-hidden">
              Toggle child pages in navigation
             </div>
             <i class="icon">
              <svg>
               <use href="#svg-arrow-right">
               </use>
              </svg>
             </i>
            </label>
            <ul>
             <li class="toctree-l3">
              <a class="reference internal" href="../../document/fluent-interface/">
               Fluent Interface
              </a>
             </li>
            </ul>
           </li>
           <li class="toctree-l2 has-children">
            <a class="reference internal" href="../../document/documentarray/">
             DocumentArray
            </a>
            <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/>
            <label for="toctree-checkbox-5">
             <div class="visually-hidden">
              Toggle child pages in navigation
             </div>
             <i class="icon">
              <svg>
               <use href="#svg-arrow-right">
               </use>
              </svg>
             </i>
            </label>
            <ul>
             <li class="toctree-l3">
              <a class="reference internal" href="../../document/documentarraymemmap-api/">
               DocumentArrayMemmap
              </a>
             </li>
            </ul>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../executor/">
           Executor
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-6">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../executor/executor-api/">
             Create Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../executor/executor-built-in-features/">
             Executor Features
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../executor/executors-in-action/">
             Executor in Action
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../executor/repository-structure/">
             Executor File Structure
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../tutorials/gpu-executor/">
             Run Executors on GPU
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 current has-children">
          <a class="reference internal" href="../">
           Flow
          </a>
          <input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-7">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul class="current">
           <li class="toctree-l2">
            <a class="reference internal" href="../flow-api/">
             Create Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../send-recv/">
             Flow IO
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../add-exec-to-flow/">
             Add Executor
            </a>
           </li>
           <li class="toctree-l2 current current-page">
            <a class="current reference internal" href="#">
             Distributed &amp; Parallel Execution
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../async-flow/">
             Asynchronous Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../flow-as-a-service/">
             Serving Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../remarks/">
             Remarks
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1">
          <a class="reference internal" href="../../clean-code/">
           Clean &amp; Efficient Code
          </a>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Data Types
         </span>
        </p>
        <ul>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../datatype/text/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-typography" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M6.21 8.5L4.574 3.594 2.857 8.5H6.21zm.5 1.5l.829 2.487a.75.75 0 001.423-.474L5.735 2.332a1.216 1.216 0 00-2.302-.018l-3.39 9.688a.75.75 0 001.415.496L2.332 10H6.71zm3.13-4.358C10.53 4.374 11.87 4 13 4c1.5 0 3 .939 3 2.601v5.649a.75.75 0 01-1.448.275C13.995 12.82 13.3 13 12.5 13c-.77 0-1.514-.231-2.078-.709-.577-.488-.922-1.199-.922-2.041 0-.694.265-1.411.887-1.944C11 7.78 11.88 7.5 13 7.5h1.5v-.899c0-.54-.5-1.101-1.5-1.101-.869 0-1.528.282-1.84.858a.75.75 0 11-1.32-.716zM14.5 9H13c-.881 0-1.375.22-1.637.444-.253.217-.363.5-.363.806 0 .408.155.697.39.896.249.21.63.354 1.11.354.732 0 1.26-.209 1.588-.449.35-.257.412-.495.412-.551V9z" fill-rule="evenodd">
            </path>
           </svg>
           Text
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-8">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../tutorials/fuzzy-grep/">
             Fuzzy String Matching in 30 Lines
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../datatype/text/full-text-search/">
             Full Text Search via Feature Hashing
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../tutorials/chatbot/">
             Question-Answering Chatbot via Transformer
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../tutorials/question-answering-bot/">
             Open-Domain Question-Answering on Long Document
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../datatype/image/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-image" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M1.75 2.5a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h.94a.76.76 0 01.03-.03l6.077-6.078a1.75 1.75 0 012.412-.06L14.5 10.31V2.75a.25.25 0 00-.25-.25H1.75zm12.5 11H4.81l5.048-5.047a.25.25 0 01.344-.009l4.298 3.889v.917a.25.25 0 01-.25.25zm1.75-.25V2.75A1.75 1.75 0 0014.25 1H1.75A1.75 1.75 0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0016 13.25zM5.5 6a.5.5 0 11-1 0 .5.5 0 011 0zM7 6a2 2 0 11-4 0 2 2 0 014 0z" fill-rule="evenodd">
            </path>
           </svg>
           Image
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-9">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../datatype/image/image2image/">
             Search Similar Images
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../datatype/image/text2image/">
             Search Image from Text via CLIP model
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../datatype/image/small-images-inside-big-images/">
             Find Small Images Inside Large Images
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../datatype/video/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-device-camera-video" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M16 3.75a.75.75 0 00-1.136-.643L11 5.425V4.75A1.75 1.75 0 009.25 3h-7.5A1.75 1.75 0 000 4.75v6.5C0 12.216.784 13 1.75 13h7.5A1.75 1.75 0 0011 11.25v-.675l3.864 2.318A.75.75 0 0016 12.25v-8.5zm-5 5.075l3.5 2.1v-5.85l-3.5 2.1v1.65zM9.5 6.75v-2a.25.25 0 00-.25-.25h-7.5a.25.25 0 00-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-4.5z" fill-rule="evenodd">
            </path>
           </svg>
           Video
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-10">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../tutorials/video-qa/">
             Question-Answering on in-Video Content
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../tutorials/video-search/">
             Search in-Video Visual Content via Text
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../datatype/audio/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-unmute" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M7.563 2.069A.75.75 0 018 2.75v10.5a.75.75 0 01-1.238.57L3.472 11H1.75A1.75 1.75 0 010 9.25v-2.5C0 5.784.784 5 1.75 5h1.723l3.289-2.82a.75.75 0 01.801-.111zM6.5 4.38L4.238 6.319a.75.75 0 01-.488.181h-2a.25.25 0 00-.25.25v2.5c0 .138.112.25.25.25h2a.75.75 0 01.488.18L6.5 11.62V4.38zm6.096-2.038a.75.75 0 011.06 0 8 8 0 010 11.314.75.75 0 01-1.06-1.06 6.5 6.5 0 000-9.193.75.75 0 010-1.06v-.001zm-1.06 2.121a.75.75 0 10-1.061 1.061 3.5 3.5 0 010 4.95.75.75 0 101.06 1.06 5 5 0 000-7.07l.001-.001z" fill-rule="evenodd">
            </path>
           </svg>
           Audio
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-11">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../datatype/audio/similar-audio-search/">
             Search Similar Audios
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../datatype/mesh/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-package" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M8.878.392a1.75 1.75 0 00-1.756 0l-5.25 3.045A1.75 1.75 0 001 4.951v6.098c0 .624.332 1.2.872 1.514l5.25 3.045a1.75 1.75 0 001.756 0l5.25-3.045c.54-.313.872-.89.872-1.514V4.951c0-.624-.332-1.2-.872-1.514L8.878.392zM7.875 1.69a.25.25 0 01.25 0l4.63 2.685L8 7.133 3.245 4.375l4.63-2.685zM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432L2.5 5.677zm6.25 8.271l4.625-2.683a.25.25 0 00.125-.216V5.677L8.75 8.432v5.516z" fill-rule="evenodd">
            </path>
           </svg>
           3D Mesh
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-12">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../datatype/mesh/mesh-search/">
             Search Similar 3D Meshes
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../datatype/tabular/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-table" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v3.585a.746.746 0 010 .83v8.085A1.75 1.75 0 0114.25 16H6.309a.748.748 0 01-1.118 0H1.75A1.75 1.75 0 010 14.25V6.165a.746.746 0 010-.83V1.75zM1.5 6.5v7.75c0 .138.112.25.25.25H5v-8H1.5zM5 5H1.5V1.75a.25.25 0 01.25-.25H5V5zm1.5 1.5v8h7.75a.25.25 0 00.25-.25V6.5h-8zm8-1.5h-8V1.5h7.75a.25.25 0 01.25.25V5z" fill-rule="evenodd">
            </path>
           </svg>
           Table
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-13">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../datatype/tabular/filter-via-neural-search/">
             Filter Table Rows by Attributes
            </a>
           </li>
          </ul>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Advanced
         </span>
        </p>
        <ul>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../advanced/hub/">
           Share Executors via Hub
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-14">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/hub/hub-portal/">
             Hub Portal
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/hub/create-hub-executor/">
             Create Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/hub/push-executor/">
             Publish Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/hub/use-hub-executor/">
             Use Hub Executor
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/hub/executor-best-practices/">
             Best Practices
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../tutorials/master-executor/">
             Master Executor: from Zero to Hub
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../advanced/daemon/">
           Remote Executors and Flows via JinaD
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-15">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/daemon/jinad-server/">
             JinaD Server
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/daemon/jinad-client/">
             JinaD Client
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/daemon/remote-executors/">
             Remote Executors
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/daemon/workspace/">
             Workspace
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/daemon/remote-flows/">
             Remote Flow
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/daemon/stream-remote-logs/">
             Remote Logs
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/daemon/development-using-jinad/">
             JinaD Development Guides
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../advanced/experimental/">
           <svg aria-hidden="true" class="sd-octicon sd-octicon-beaker" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
            <path d="M5 5.782V2.5h-.25a.75.75 0 010-1.5h6.5a.75.75 0 010 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458L5 5.782zM9.5 2.5h-3V6a.75.75 0 01-.117.403L4.73 9h6.54L9.617 6.403A.75.75 0 019.5 6V2.5zm-6.9 9.847L3.775 10.5h8.45l1.175 1.847a.75.75 0 01-.633 1.153H3.233a.75.75 0 01-.633-1.153z" fill-rule="evenodd">
            </path>
           </svg>
           Experimental Features
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-16">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/experimental/kubernetes/">
             Jina on Kubernetes
            </a>
           </li>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../advanced/experimental/indexers/">
             Indexers on Jina Hub
            </a>
           </li>
          </ul>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          API Reference
         </span>
        </p>
        <ul>
         <li class="toctree-l1">
          <a class="reference internal" href="../../../cli/">
           Jina Command-Line Interface
          </a>
         </li>
         <li class="toctree-l1 has-children">
          <a class="reference internal" href="../../../proto/">
           Jina Protobuf Specification
          </a>
          <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/>
          <label for="toctree-checkbox-17">
           <div class="visually-hidden">
            Toggle child pages in navigation
           </div>
           <i class="icon">
            <svg>
             <use href="#svg-arrow-right">
             </use>
            </svg>
           </i>
          </label>
          <ul>
           <li class="toctree-l2">
            <a class="reference internal" href="../../../proto/docs/">
             Protocol Documentation
            </a>
           </li>
          </ul>
         </li>
        </ul>
        <p class="caption" role="heading">
         <span class="caption-text">
          Ecosystem
         </span>
        </p>
        <ul>
         <li class="toctree-l1">
          <a class="reference internal" href="#">
           <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/search-light.svg"/>
           <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/search-dark.svg"/>
           Jina
          </a>
         </li>
         <li class="toctree-l1">
          <a class="reference external" href="https://hub.jina.ai">
           <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/hub-light.svg"/>
           <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/hub-dark.svg"/>
           Jina Hub
          </a>
         </li>
         <li class="toctree-l1">
          <a class="reference external" href="https://finetuner.jina.ai">
           <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/finetuner-light.svg"/>
           <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/finetuner-dark.svg"/>
           Finetuner
          </a>
         </li>
        </ul>
       </div>
      </div>
     </div>
    </div>
   </aside>
   <div class="main">
    <div class="content">
     <article role="main">
      <div class="content-icon-container">
       <div class="theme-toggle-container theme-toggle-content">
        <button class="theme-toggle">
         <div class="visually-hidden">
          Toggle Light / Dark / Auto color theme
         </div>
         <svg class="theme-icon-when-auto">
          <use href="#svg-sun-half">
          </use>
         </svg>
         <svg class="theme-icon-when-dark">
          <use href="#svg-moon">
          </use>
         </svg>
         <svg class="theme-icon-when-light">
          <use href="#svg-sun">
          </use>
         </svg>
        </button>
       </div>
       <label class="toc-overlay-icon toc-content-icon" for="__toc">
        <div class="visually-hidden">
         Toggle table of contents sidebar
        </div>
        <i class="icon">
         <svg>
          <use href="#svg-toc">
          </use>
         </svg>
        </i>
       </label>
      </div>
      <section class="tex2jax_ignore mathjax_ignore" id="distributed-parallel-execution">
       <span id="flow-topology">
       </span>
       <h1>
        Distributed &amp; Parallel Execution
        <a class="headerlink" href="#distributed-parallel-execution" title="Permalink to this headline">
         ¶
        </a>
       </h1>
       <p>
        The topology of a Flow defines how information is distributed between all Executors.
       </p>
       <p>
        Each Executor has predecessors and successors. An Executor receives requests from all of its predecessors and sends them to all of its successors.
       </p>
       <p>
        Additionally, an Executor can be split into Shards and Replicas. This enables horizontal scaling of Executors. A shard is typically used for partitioning data (like a big index) and Replicas are used to increase throughput and availability.
       </p>
       <section id="define-predecessors-via-needs">
        <h2>
         Define predecessors via
         <code class="docutils literal notranslate">
          <span class="pre">
           needs
          </span>
         </code>
         <a class="headerlink" href="#define-predecessors-via-needs" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         To define predecessors of an Executor, use the
         <code class="docutils literal notranslate">
          <span class="pre">
           needs
          </span>
         </code>
         parameter. If
         <code class="docutils literal notranslate">
          <span class="pre">
           needs
          </span>
         </code>
         is not provided, the previously added Executor is set as the default:
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">Flow</span><span class="p">()</span>
     <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'p1'</span><span class="p">,</span> <span class="n">needs</span><span class="o">=</span><span class="s1">'gateway'</span><span class="p">)</span>
     <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'p2'</span><span class="p">,</span> <span class="n">needs</span><span class="o">=</span><span class="s1">'gateway'</span><span class="p">)</span>
     <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'p3'</span><span class="p">,</span> <span class="n">needs</span><span class="o">=</span><span class="s1">'gateway'</span><span class="p">)</span>
     <span class="o">.</span><span class="n">needs</span><span class="p">([</span><span class="s1">'p1'</span><span class="p">,</span> <span class="s1">'p2'</span><span class="p">,</span> <span class="s1">'p3'</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">'r1'</span><span class="p">))</span>
</pre>
         </div>
        </div>
        <figure class="align-center">
         <img alt="../../../_images/simple-flow.svg" src="../../../_images/simple-flow.svg"/>
        </figure>
        <p>
         <code class="docutils literal notranslate">
          <span class="pre">
           p1
          </span>
         </code>
         ,
         <code class="docutils literal notranslate">
          <span class="pre">
           p2
          </span>
         </code>
         ,
         <code class="docutils literal notranslate">
          <span class="pre">
           p3
          </span>
         </code>
         now subscribe to
         <code class="docutils literal notranslate">
          <span class="pre">
           Gateway
          </span>
         </code>
         and conduct their work in parallel. The last
         <code class="docutils literal notranslate">
          <span class="pre">
           .needs()
          </span>
         </code>
         blocks all Executors
until they finish their work.
        </p>
        <p>
         <code class="docutils literal notranslate">
          <span class="pre">
           .needs()
          </span>
         </code>
         is syntax sugar and roughly equal to:
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">needs</span><span class="o">=</span><span class="p">[</span><span class="s1">'p1'</span><span class="p">,</span> <span class="s1">'p2'</span><span class="p">,</span> <span class="s1">'p3'</span><span class="p">])</span>
</pre>
         </div>
        </div>
        <p>
         <code class="docutils literal notranslate">
          <span class="pre">
           .needs_all()
          </span>
         </code>
         is syntax sugar and roughly equal to:
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">needs</span><span class="o">=</span><span class="p">[</span><span class="n">all_orphan_executors_so_far</span><span class="p">])</span>
</pre>
         </div>
        </div>
        <p>
         “Orphan” Executors have no connected Executors to their outputs. The above code snippet can be also written as:
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">Flow</span><span class="p">()</span>
     <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'p1'</span><span class="p">,</span> <span class="n">needs</span><span class="o">=</span><span class="s1">'gateway'</span><span class="p">)</span>
     <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'p2'</span><span class="p">,</span> <span class="n">needs</span><span class="o">=</span><span class="s1">'gateway'</span><span class="p">)</span>
     <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'p3'</span><span class="p">,</span> <span class="n">needs</span><span class="o">=</span><span class="s1">'gateway'</span><span class="p">)</span>
     <span class="o">.</span><span class="n">needs_all</span><span class="p">())</span>
</pre>
         </div>
        </div>
       </section>
       <section id="scale-executors-by-using-replicas">
        <h2>
         Scale Executors by using Replicas
         <a class="headerlink" href="#scale-executors-by-using-replicas" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         Replicas can be used to create multiple copies of the same Executor. Each request in the Flow is then passed to only one replica (instance) of your Executor. This can be useful for a couple of challenges like performance and availability:
        </p>
        <ul class="simple">
         <li>
          <p>
           If you have slow Executors (like some Encoders) you may want to scale up the number of instances of this particular Executor so that you can process multiple requests in parallel
          </p>
         </li>
         <li>
          <p>
           Executors might need to be taken offline from time to time (updates, failures, etc.), but you may want your Flow to be able to process requests all the time. In this case Replicas can be used as well so that any Replica of an Executor can be taken offline as long as there is still one running Replica online. Using this technique it is possible to create a High availability setup for your Flow.
          </p>
         </li>
        </ul>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">Flow</span><span class="p">()</span>
     <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'slow_encoder'</span><span class="p">,</span> <span class="n">replicas</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
     <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'fast_indexer'</span><span class="p">))</span>
</pre>
         </div>
        </div>
        <figure class="align-center">
         <img alt="../../../_images/parallel-explain.svg" src="../../../_images/parallel-explain.svg"/>
        </figure>
        <p>
         The above Flow will create a topology with three Replicas of Executor
         <code class="docutils literal notranslate">
          <span class="pre">
           slow_encoder
          </span>
         </code>
         . The
         <code class="docutils literal notranslate">
          <span class="pre">
           Gateway
          </span>
         </code>
         will send every
request to exactly one of the three instances. Then the replica will send its result to
         <code class="docutils literal notranslate">
          <span class="pre">
           fast_indexer
          </span>
         </code>
         .
        </p>
        <section id="avoiding-bottlenecks-on-executors-with-replicas">
         <h3>
          Avoiding Bottlenecks on Executors with
          <code class="docutils literal notranslate">
           <span class="pre">
            replicas
           </span>
          </code>
          <a class="headerlink" href="#avoiding-bottlenecks-on-executors-with-replicas" title="Permalink to this headline">
           ¶
          </a>
         </h3>
         <p>
          In this section, we will showcase how we can avoid having bottlenecks on slow Executors by using
          <code class="docutils literal notranslate">
           <span class="pre">
            replicas
           </span>
          </code>
          .
         </p>
         <p>
          Suppose we have the following Executor:
         </p>
         <div class="highlight-python notranslate">
          <div class="highlight">
           <pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Executor</span><span class="p">,</span> <span class="n">requests</span>


<span class="k">class</span> <span class="nc">MyExecutor</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>

    <span class="nd">@requests</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/slow'</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

    <span class="nd">@requests</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">'/fast'</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>
</pre>
          </div>
         </div>
         <p>
          We will simulate parallel requests to both endpoints of the Executor with these utility functions:
         </p>
         <div class="highlight-python notranslate">
          <div class="highlight">
           <pre><span></span><span class="kn">from</span> <span class="nn">jina.logging.profile</span> <span class="kn">import</span> <span class="n">TimeContext</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="kn">import</span> <span class="nn">multiprocessing</span>

<span class="k">def</span> <span class="nf">make_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">TimeContext</span><span class="p">(</span><span class="sa">f</span><span class="s1">'calling </span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s1"> roundtrip'</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">protocol</span><span class="o">=</span><span class="s1">'grpc'</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">12345</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">simulate</span><span class="p">(</span><span class="n">flow</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">flow</span><span class="p">:</span>
        <span class="n">mp</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="c1"># make multiple requests to both endpoints, in parallel</span>
        <span class="k">for</span> <span class="n">endpoint</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'/slow'</span><span class="p">,</span> <span class="s1">'/fast'</span><span class="p">,</span> <span class="s1">'/slow'</span><span class="p">,</span> <span class="s1">'/fast'</span><span class="p">]:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">make_request</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,))</span>
            <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            <span class="n">mp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="c1"># </span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">mp</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre>
          </div>
         </div>
         <p>
          If we simply create a Flow with only 1 instance of
          <code class="docutils literal notranslate">
           <span class="pre">
            MyExecutor
           </span>
          </code>
          , requests to the slow endpoint will make a bottleneck.
However, creating replicas will unblock the Flow:
         </p>
         <div class="tab-set docutils">
          <input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"/>
          <label class="tab-label" for="tab-set--0-input--1">
           with replicas
          </label>
          <div class="tab-content docutils">
           <div class="highlight-python notranslate">
            <div class="highlight">
             <pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">scaled_f</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span><span class="n">protocol</span><span class="o">=</span><span class="s1">'grpc'</span><span class="p">,</span> <span class="n">port_expose</span><span class="o">=</span><span class="mi">12345</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="n">MyExecutor</span><span class="p">,</span> <span class="n">replicas</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="k">with</span> <span class="n">TimeContext</span><span class="p">(</span><span class="s1">'calling scaled flow'</span><span class="p">):</span>
    <span class="n">simulate</span><span class="p">(</span><span class="n">scaled_f</span><span class="p">)</span>  <span class="c1"># will take around 5 seconds</span>
</pre>
            </div>
           </div>
           <div class="highlight-text notranslate">
            <div class="highlight">
             <pre><span></span>calling scaled flow takes 6 seconds (6.11s)
</pre>
            </div>
           </div>
          </div>
          <input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"/>
          <label class="tab-label" for="tab-set--0-input--2">
           without replicas
          </label>
          <div class="tab-content docutils">
           <div class="highlight-python notranslate">
            <div class="highlight">
             <pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span><span class="n">protocol</span><span class="o">=</span><span class="s1">'grpc'</span><span class="p">,</span> <span class="n">port_expose</span><span class="o">=</span><span class="mi">12345</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="n">MyExecutor</span><span class="p">)</span>

<span class="k">with</span> <span class="n">TimeContext</span><span class="p">(</span><span class="s1">'calling normal flow'</span><span class="p">):</span>
    <span class="n">simulate</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>  <span class="c1"># will take around 10 seconds</span>
</pre>
            </div>
           </div>
           <div class="highlight-text notranslate">
            <div class="highlight">
             <pre><span></span>calling normal flow takes 11 seconds (11.75s)
</pre>
            </div>
           </div>
          </div>
         </div>
         <p>
          Therefore, by using
          <code class="docutils literal notranslate">
           <span class="pre">
            replicas
           </span>
          </code>
          , the Flow enjoys a non-blocking behavior and we can avoid bottlenecks.
         </p>
         <div class="important admonition">
          <p class="admonition-title">
           Important
          </p>
          <p>
           By default,
           <code class="docutils literal notranslate">
            <span class="pre">
             polling='ANY'
            </span>
           </code>
           . If
           <code class="docutils literal notranslate">
            <span class="pre">
             polling
            </span>
           </code>
           is set to
           <code class="docutils literal notranslate">
            <span class="pre">
             ALL
            </span>
           </code>
           , this will not be valid anymore: All instances of the
Executor will receive each request and there will be no performance benefits.
          </p>
         </div>
        </section>
       </section>
       <section id="partition-data-by-using-shards">
        <h2>
         Partition data by using Shards
         <a class="headerlink" href="#partition-data-by-using-shards" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         Shards can be used to partition data (like an Index) into several parts. This enables the distribution of data across multiple machines.
This is helpful in two situations:
        </p>
        <ul class="simple">
         <li>
          <p>
           When the full data does not fit on one machine
          </p>
         </li>
         <li>
          <p>
           When the latency of a single request becomes too large.
          </p>
         </li>
        </ul>
        <p>
         Then splitting the load across two or more machines yields better results.
        </p>
        <p>
         For Shards, you can define which shard (instance) will receive the request from its predecessor. This behaviour is called
         <code class="docutils literal notranslate">
          <span class="pre">
           polling
          </span>
         </code>
         . By default
         <code class="docutils literal notranslate">
          <span class="pre">
           polling
          </span>
         </code>
         is set to
         <code class="docutils literal notranslate">
          <span class="pre">
           ANY
          </span>
         </code>
         , which means only one shard will receive a request. If
         <code class="docutils literal notranslate">
          <span class="pre">
           polling
          </span>
         </code>
         is to
         <code class="docutils literal notranslate">
          <span class="pre">
           ALL
          </span>
         </code>
         it means that all Shards will receive a request.
        </p>
        <p>
         When you shard your index, the request handling usually differs between index and search requests:
        </p>
        <ul class="simple">
         <li>
          <p>
           Index (and update, delete) will just be handled by a single shard =&gt;
           <code class="docutils literal notranslate">
            <span class="pre">
             polling='any'
            </span>
           </code>
          </p>
         </li>
         <li>
          <p>
           Search requests are handled by all Shards =&gt;
           <code class="docutils literal notranslate">
            <span class="pre">
             polling='all'
            </span>
           </code>
          </p>
         </li>
        </ul>
        <p>
         For indexing, you only want a single shard to receive a request, because this is sufficient to add it to the index.
For searching, you probably need to send the search request to all Shards, because the requested data could be on any shard.
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">index_flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'ExecutorWithShards'</span><span class="p">,</span> <span class="n">shards</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">polling</span><span class="o">=</span><span class="s1">'any'</span><span class="p">)</span>
<span class="n">search_flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'ExecutorWithShards'</span><span class="p">,</span> <span class="n">shards</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">polling</span><span class="o">=</span><span class="s1">'all'</span><span class="p">,</span> <span class="n">uses_after</span><span class="o">=</span><span class="s1">'MatchMerger'</span><span class="p">)</span>
</pre>
         </div>
        </div>
        <section id="merging-search-results-via-uses-after">
         <h3>
          Merging search results via
          <code class="docutils literal notranslate">
           <span class="pre">
            uses_after
           </span>
          </code>
          <a class="headerlink" href="#merging-search-results-via-uses-after" title="Permalink to this headline">
           ¶
          </a>
         </h3>
         <p>
          Each shard of a search Flow returns one set of results for each query Document.
A merger Executor combines them afterwards.
You can use the pre-built
          <a class="reference external" href="https://hub.jina.ai/executor/mruax3k7">
           MatchMerger
          </a>
          or define your merger.
         </p>
         <div class="example admonition">
          <p class="admonition-title">
           Example
          </p>
          <p>
           A search Flow has 10 Shards for an Indexer.
Each shard returns the top 20 results.
After the merger there will be 200 results per query Document.
          </p>
         </div>
        </section>
       </section>
       <section id="combining-replicas-shards">
        <h2>
         Combining Replicas &amp; Shards
         <a class="headerlink" href="#combining-replicas-shards" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         Replicas and Shards can also be combined, which is necessary for Flows with high scalability needs.
In this case Jina will shard the Executor and create Replicas for each shard.
        </p>
        <div class="highlight-python notranslate">
         <div class="highlight">
          <pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">Flow</span><span class="p">()</span>
     <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'shards_with_replicas'</span><span class="p">,</span> <span class="n">shards</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">replicas</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
</pre>
         </div>
        </div>
        <figure class="align-center">
         <img alt="../../../_images/replica_shards_example.svg" src="../../../_images/replica_shards_example.svg"/>
        </figure>
        <p>
         This Flow has a single Executor with 2 Shards and 3 Replicas, which means it gets split into 2 Shards with 3 Replicas each. In total this Flow has 2*3=6 workers and could be distributed to six different machines if necessary.
        </p>
       </section>
       <section id="replicas-vs-shards">
        <h2>
         Replicas vs Shards
         <a class="headerlink" href="#replicas-vs-shards" title="Permalink to this headline">
          ¶
         </a>
        </h2>
        <p>
         The next table shows the difference between shards and replicas.
        </p>
        <div class="table-wrapper">
         <table border="1" class="docutils">
          <thead>
           <tr>
            <th>
            </th>
            <th>
             Replicas
            </th>
            <th>
             Shards
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td>
             Create multiple copies of an executor
            </td>
            <td>
             ✅
            </td>
            <td>
             ✅
            </td>
           </tr>
           <tr>
            <td>
             Partition data into several parts
            </td>
            <td>
             ❌
            </td>
            <td>
             ✅
            </td>
           </tr>
           <tr>
            <td>
             Request handled by one of the executors
            </td>
            <td>
             ✅
            </td>
            <td>
             ✅, if
             <code>
              polling = 'any'
             </code>
            </td>
           </tr>
           <tr>
            <td>
             Request handled by all of the executors
            </td>
            <td>
             ❌
            </td>
            <td>
             ✅, if
             <code>
              polling = 'all'
             </code>
            </td>
           </tr>
          </tbody>
         </table>
        </div>
        <p>
         Think of using
         <code class="docutils literal notranslate">
          <span class="pre">
           replicas
          </span>
         </code>
         when you have slow Executors and you want to be able to process multiple requests in parallel.
Also replicas provide high availability in case some executors are taken down (for updates, failures, etc)
        </p>
        <p>
         On the other hand, when your data  is too large to fit in one machine or if the latency of a request is too large
         <code class="docutils literal notranslate">
          <span class="pre">
           shards
          </span>
         </code>
         is your best option since it allows you to split your data across multiple machines.
        </p>
        <div class="warning admonition">
         <p class="admonition-title">
          Warning
         </p>
         <p>
          Sometimes you’ll also encouter
          <code class="docutils literal notranslate">
           <span class="pre">
            parallel
           </span>
          </code>
          , this is equivalent to
          <code class="docutils literal notranslate">
           <span class="pre">
            shards
           </span>
          </code>
          and is only kept for backwards compatibility.
         </p>
        </div>
       </section>
      </section>
     </article>
     <footer>
      <div class="related-pages">
       <a class="next-page" href="../async-flow/">
        <div class="page-info">
         <div class="context">
          <span>
           Next
          </span>
         </div>
         <div class="title">
          Asynchronous Flow
         </div>
        </div>
        <svg>
         <use href="#svg-arrow-right">
         </use>
        </svg>
       </a>
       <a class="prev-page" href="../add-exec-to-flow/">
        <svg>
         <use href="#svg-arrow-right">
         </use>
        </svg>
        <div class="page-info">
         <div class="context">
          <span>
           Previous
          </span>
         </div>
         <div class="title">
          Add Executor
         </div>
        </div>
       </a>
      </div>
      <div class="related-information sd-d-inline-flex">
       <a href="https://jina.ai">
        Copyright © Jina AI Limited. All rights reserved.
       </a>
       Last updated on Dec 01, 2021.
       <div class="social-btns">
        <a aria-label="GitHub" class="social-btn" href="https://github.com/jina-ai/jina/" rel="noreferrer" target="_blank">
         <i class="fab fa-github">
         </i>
        </a>
        <a aria-label="Slack" class="social-btn" href="https://slack.jina.ai" rel="noreferrer" target="_blank">
         <i class="fab fa-slack">
         </i>
        </a>
        <a aria-label="YouTube" class="social-btn" href="https://youtube.com/c/jina-ai" rel="noreferrer" target="_blank">
         <i class="fab fa-youtube">
         </i>
        </a>
        <a aria-label="Twitter" class="social-btn" href="https://twitter.com/JinaAI_" rel="noreferrer" target="_blank">
         <i class="fab fa-twitter">
         </i>
        </a>
        <a aria-label="LinkedIn" class="social-btn" href="https://www.linkedin.com/company/jinaai/" rel="noreferrer" target="_blank">
         <i class="fab fa-linkedin">
         </i>
        </a>
       </div>
      </div>
     </footer>
    </div>
    <aside class="toc-drawer" id="toc-drawer">
     <div class="toc-sticky toc-scroll">
      <div class="toc-title-container">
       <span class="toc-title">
        Contents
       </span>
      </div>
      <div class="toc-tree-container">
       <div class="toc-tree">
        <ul>
         <li>
          <a class="reference internal" href="#">
           Distributed &amp; Parallel Execution
          </a>
          <ul>
           <li>
            <a class="reference internal" href="#define-predecessors-via-needs">
             Define predecessors via
             <code class="docutils literal notranslate">
              <span class="pre">
               needs
              </span>
             </code>
            </a>
           </li>
           <li>
            <a class="reference internal" href="#scale-executors-by-using-replicas">
             Scale Executors by using Replicas
            </a>
            <ul>
             <li>
              <a class="reference internal" href="#avoiding-bottlenecks-on-executors-with-replicas">
               Avoiding Bottlenecks on Executors with
               <code class="docutils literal notranslate">
                <span class="pre">
                 replicas
                </span>
               </code>
              </a>
             </li>
            </ul>
           </li>
           <li>
            <a class="reference internal" href="#partition-data-by-using-shards">
             Partition data by using Shards
            </a>
            <ul>
             <li>
              <a class="reference internal" href="#merging-search-results-via-uses-after">
               Merging search results via
               <code class="docutils literal notranslate">
                <span class="pre">
                 uses_after
                </span>
               </code>
              </a>
             </li>
            </ul>
           </li>
           <li>
            <a class="reference internal" href="#combining-replicas-shards">
             Combining Replicas &amp; Shards
            </a>
           </li>
           <li>
            <a class="reference internal" href="#replicas-vs-shards">
             Replicas vs Shards
            </a>
           </li>
          </ul>
         </li>
        </ul>
       </div>
      </div>
      <details class="jina-doc-bot sd-sphinx-override sd-dropdown sd-card" id="jina-docbot" v-bind:class="{ready: ready}">
       <summary class="sd-summary-title sd-card-header">
        <svg aria-hidden="true" class="sd-octicon sd-octicon-comment-discussion" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
         <path d="M1.5 2.75a.25.25 0 01.25-.25h8.5a.25.25 0 01.25.25v5.5a.25.25 0 01-.25.25h-3.5a.75.75 0 00-.53.22L3.5 11.44V9.25a.75.75 0 00-.75-.75h-1a.25.25 0 01-.25-.25v-5.5zM1.75 1A1.75 1.75 0 000 2.75v5.5C0 9.216.784 10 1.75 10H2v1.543a1.457 1.457 0 002.487 1.03L7.061 10h3.189A1.75 1.75 0 0012 8.25v-5.5A1.75 1.75 0 0010.25 1h-8.5zM14.5 4.75a.25.25 0 00-.25-.25h-.5a.75.75 0 110-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0114.25 12H14v1.543a1.457 1.457 0 01-2.487 1.03L9.22 12.28a.75.75 0 111.06-1.06l2.22 2.22v-2.19a.75.75 0 01.75-.75h1a.25.25 0 00.25-.25v-5.5z" fill-rule="evenodd">
         </path>
        </svg>
        Ask our docs!
        <div class="sd-summary-down docutils">
         <svg aria-hidden="true" class="sd-octicon sd-octicon-chevron-down" height="1.5em" version="1.1" viewbox="0 0 24 24" width="1.5em">
          <path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd">
          </path>
         </svg>
        </div>
        <div class="sd-summary-up docutils">
         <svg aria-hidden="true" class="sd-octicon sd-octicon-chevron-up" height="1.5em" version="1.1" viewbox="0 0 24 24" width="1.5em">
          <path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd">
          </path>
         </svg>
        </div>
       </summary>
       <div class="sd-summary-content docutils">
        <div class="jina-doc-answer">
         <div class="jina-doc-answer-hint" v-if="qa_pairs.length===0">
          <p class="jina-doc-bot-help-text sd-font-weight-bold" v-if="!ready">
           Chat loading...
           <br/>
           <br/>
           You can think of questions while our bot load. Try:
          </p>
          <p class="jina-doc-bot-help-text sd-font-weight-bold hidden-before-ready" v-else="">
           You can ask questions about our docs. Try:
          </p>
          <ul class="example-question simple sd-font-weight-light">
           <li>
            <p>
             Does Jina support Kubernetes?
            </p>
           </li>
           <li>
            <p>
             How can I traverse a nested DocumentArray?
            </p>
           </li>
           <li>
            <p>
             What are the basic concepts in Jina?
            </p>
           </li>
          </ul>
         </div>
         <div class="jina-doc-answer-dialog hidden-before-ready" v-else="">
          <div class="qa-container" v-for="qa in qa_pairs">
           <div class="sd-text-right" v-if="qa.question">
            <div class="talk-bubble question-bubble">
             <div class="talktext">
              <p>
               ${qa.question}
              </p>
             </div>
            </div>
           </div>
           <div class="talk-bubble answer-bubble">
            <div class="talktext">
             <p v-if="qa.answer">
              ${qa.answer.text}
             </p>
             <div v-else="">
              <svg class="loader" height="10" width="40">
               <circle class="dot" cx="10" cy="5" r="3">
               </circle>
               <circle class="dot" cx="20" cy="5" r="3">
               </circle>
               <circle class="dot" cx="30" cy="5" r="3">
               </circle>
              </svg>
             </div>
            </div>
            <a class="answer-reference" href="https://slack.jina.ai" target="_blank" v-if="qa.answer &amp;&amp; is_conn_broken">
             Report
            </a>
            <div class="feedback-tooltip sd-d-flex-row" v-if="qa.answer &amp;&amp; !is_conn_broken &amp;&amp; qa.answer.uri">
             <a :href="root_url + qa.answer.uri" class="answer-reference">
              Source
             </a>
             <div class="sd-d-flex-row">
              <div class="thumb-answer thumbup" style="margin: 0 6px" v-on:click="submit_rating(qa, true)" v-show="qa.rating===null">
               <svg aria-hidden="true" class="sd-octicon sd-octicon-thumbsup" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
                <path d="M8.834.066C7.494-.087 6.5 1.048 6.5 2.25v.5c0 1.329-.647 2.124-1.318 2.614-.328.24-.66.403-.918.508A1.75 1.75 0 002.75 5h-1A1.75 1.75 0 000 6.75v7.5C0 15.216.784 16 1.75 16h1a1.75 1.75 0 001.662-1.201c.525.075 1.067.229 1.725.415.152.043.31.088.475.133 1.154.32 2.54.653 4.388.653 1.706 0 2.97-.153 3.722-1.14.353-.463.537-1.042.668-1.672.118-.56.208-1.243.313-2.033l.04-.306c.25-1.869.265-3.318-.188-4.316a2.418 2.418 0 00-1.137-1.2C13.924 5.085 13.353 5 12.75 5h-1.422l.015-.113c.07-.518.157-1.17.157-1.637 0-.922-.151-1.719-.656-2.3-.51-.589-1.247-.797-2.01-.884zM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.922.922 0 00-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.861 5.861 0 01-1.567.81V13.3zM2.75 6.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-1a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25h1z" fill-rule="evenodd">
                </path>
               </svg>
              </div>
              <div class="thumb-answer thumbdown" v-on:click="submit_rating(qa, false)" v-show="qa.rating===null">
               <svg aria-hidden="true" class="sd-octicon sd-octicon-thumbsdown" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
                <path d="M7.083 15.986c1.34.153 2.334-.982 2.334-2.183v-.5c0-1.329.646-2.123 1.317-2.614.329-.24.66-.403.919-.508a1.75 1.75 0 001.514.872h1a1.75 1.75 0 001.75-1.75v-7.5a1.75 1.75 0 00-1.75-1.75h-1a1.75 1.75 0 00-1.662 1.2c-.525-.074-1.068-.228-1.726-.415L9.305.705C8.151.385 6.765.053 4.917.053c-1.706 0-2.97.152-3.722 1.139-.353.463-.537 1.042-.669 1.672C.41 3.424.32 4.108.214 4.897l-.04.306c-.25 1.869-.266 3.318.188 4.316.244.537.622.943 1.136 1.2.495.248 1.066.334 1.669.334h1.422l-.015.112c-.07.518-.157 1.17-.157 1.638 0 .921.151 1.718.655 2.299.512.589 1.248.797 2.011.884zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479a63.914 63.914 0 00-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.921.921 0 00.443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.862 5.862 0 011.568-.809V2.754zm1.75 6.798a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25h1a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-1z" fill-rule="evenodd">
                </path>
               </svg>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="jina-doc-bot-controls sd-d-flex-row sd-border-1">
         <textarea :disabled="!ready" :placeholder="'Type your question here'" :readonly="is_busy" autofocus="" class="sd-border-0" disabled="" id="bot-input-question" maxlength="100" placeholder="Just a moment, please ..." rows="3" style="width: 100%" v-model="cur_question" v-on:keyup.enter="submit_q"></textarea>
         <button class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-outline-primary sd-rounded-0 hidden-before-ready" id="bot-input-btn" v-on:click="submit_q" v-show="cur_question.length&gt;0 &amp;&amp; !is_busy">
          <svg aria-hidden="true" class="sd-octicon sd-octicon-paper-airplane" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em">
           <path d="M1.592 2.712L2.38 7.25h4.87a.75.75 0 110 1.5H2.38l-.788 4.538L13.929 8 1.592 2.712zM.989 8L.064 2.68a1.341 1.341 0 011.85-1.462l13.402 5.744a1.13 1.13 0 010 2.076L1.913 14.782a1.341 1.341 0 01-1.85-1.463L.99 8z" fill-rule="evenodd">
           </path>
          </svg>
         </button>
        </div>
        <div class="powered-by">
        </div>
       </div>
      </details>
     </div>
    </aside>
   </div>
  </div>
  <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js">
  </script>
  <script src="../../../_static/jquery.js">
  </script>
  <script src="../../../_static/underscore.js">
  </script>
  <script src="../../../_static/doctools.js">
  </script>
  <script src="../../../_static/scripts/main.js">
  </script>
  <script src="../../../_static/clipboard.min.js">
  </script>
  <script src="../../../_static/copybutton.js">
  </script>
  <script src="../../../_static/tabs.js">
  </script>
  <script src="../../../_static/design-tabs.js">
  </script>
  <script>
   var server_address = 'https://docsbot.jina.ai';
  </script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js">
  </script>
  <script src="../../../_static/docbot.js">
  </script>
  <script src="../../../_static/iframe.js">
  </script>
 </body>
</html>